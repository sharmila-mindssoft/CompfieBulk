{% extends "files/knowledge/common/html/container.html" %} {% block content %}
  <style>
    .progress {
      height: 35px !important;
    }

    .progress .skill {
      line-height: 35px;
      padding: 0;
      margin: 0 0 0 20px;
      text-transform: uppercase;
      font-size: 14px;
      font-weight: normal;
    }

    .progress .skill .val {
      float: right;
      font-style: normal;
      margin: 0 20px 0 0;
    }

    .progress-bar {
      text-align: left;
      transition-duration: 3s;
      width: 0;
      animation: progress 1.5s ease-in-out forwards;
    }

    .title {
      opacity: 0;
      animation: show 0.35s forwards ease-in-out 0.5s;
    }

    .invaliddata{
      display: none;
    }

    .download-file{
      border-radius: 2px;
      padding: 5px 12px;
    }

    .download-file:hover{
      border: 1px solid rgba(70, 103, 204, 0.1) !important;
      background-color: rgba(70, 103, 204, 0.15) !important;
      color: #4667cc !important;
      border-radius: 2px;
      padding: 5px 12px;
    }

    .dropbtn{
      font-size: 13px;
    }

    .dropdown-content{
      margin-left: 243px;
      display: none; /* by me */
    }

    @keyframes progress {
      from {
        width: 0;
      }
      to {
        width: 100%;
      }
    }

    @keyframes show  {
      from {
        opacity: 0;
      }
      to {
        opacity: 1;
      }
    }
  </style>
  <div class="content-page">
    <div class="content">

      <!-- Multiselect -->
      <link href="/files/knowledge/common/css/multiselect/bootstrap-multiselect.css" rel="stylesheet" type="text/css" />

      <!-- Notification css (Toastr) -->
      <link href="/files/knowledge/common/css/toastr/toastr.min.css" rel="stylesheet" type="text/css" />

      <div class="container">
        <div class="row">
          <div class="container">
            <div class="row" id="animationSandbox">
              <div class="col-sm-3"> </div>
                <div class="col-sm-6">
                  <div class="portlet">
                    <div class="portlet-heading bg-info">
                      <h3 class="portlet-title">
                         Client Unit Bulk Upload
                      </h3>
                      <div class="clearfix"></div>
                    </div>
                    <div id="bg-primary1" class="panel-collapse collapse in">
                      <div class="portlet-body">
                        <form class="form-horizontal group-border-dashed" action="#" novalidate="">
                          <div style="border:1px solid #F5F5F5" class="col-sm-12">
                            <div class="form-group m-t-20">
                              <label class="col-sm-4 control-label">Client Group:<span class="mandatory">*</span></label>
                              <div class="col-sm-6 has-feedback">
                                <input type="text" class="form-control input-sm" name="search-group-name" autofocus="autofocus" tabindex="1" maxlength="50" id="search-group-name" autofocus="autofocus" />
                                <i class="fa-1-2x form-control-feedback fa fa-search"></i>
                                <input type="hidden" name="group-id" id="group-id" value="">
                                <div id="ac-group" class="ac-textbox default-display-none">
                                    <ul style="width:94%;"></ul>
                                </div>
                              </div>
                            </div>
                            <div class="form-group has-feedback field_input">
                              <label class="col-sm-4 control-label">Select File: <span class="mandatory">*</span></label>
                              <div class="col-sm-6">
                                <input class="form-control input-sm" type="file" name="csvfile" id="csvfile" tabindex="2" />
                                <small class="" style="text-align: left;">[ Accepted file format <span style="color: #E64C3D !important;">.csv</span> ]</small>
                              </div>
                            </div>
                            <div class="form-group col-sm-12 text-center">
                              <div class="col-sm-12 col-sm-offset-1">
                               <button class="btn btn-primary waves-effect waves-light animateprogress uploadbtn" type="button" data-toggle="modal" data-target="#myModal" id="showtoast"> Upload </button>
                              <a class="btn btn-primary btn-trans invaliddata dropbtn" id="invalid_dwnload" onclick="myFunction()">  <i class="fa fa-download text-primary"></i> Valid / Invalid Data</a>
                                <div id="myDropdown" class="dropdown-content">
                                  <a id="excel">Download Excel</a>
                                  <a id="csv">Download CSV</a>
                                  <a id="ods">Download ODS</a>
                                  <a id="text">Download Text</a>
                                </div>
                              </div>
                            </div>
                            <div class="clear"></div>
                            <div class="view-summary" style="display: none;">
                              <div class="col-sm-6 no-padding">
                                <div class="form-group bg-muted">
                                 <h5 class="col-sm-12 header-title">Uploaded Data - Summary</h5>
                                </div>
                                <ul class="p-l-20">
                                  <li>Total No. Of Records: <b><span class="totalRecords"></span></b> </li>
                                  <li>Valid Records: <b> <span class="validRecords"></span> </b> </li>
                                  <li>Invalid Records: <b> <span class="invalidRecords"></span></b></li>
                                </ul>
                              </div>
                              <div class="col-sm-6 text-danger no-padding">
                                <div class="form-group bg-muted">
                                  <h5 class="col-sm-12 text-danger header-title">Invalid Data Summary</h5>
                                </div>
                                <ul class="p-l-20">
                                  <li>Mandatory field validation:
                                    <b><span class="mandatoryErrors"></span></b>
                                  </li>
                                  <li>Duplicate Data validation:
                                    <b><span class="duplicateErrors"></span></b>
                                  </li>
                                  <li>Status validation:
                                    <b><span class="statusErrors"></span></b>
                                  </li>
                                  <li>Max. length validation:
                                    <b><span class="lengthErrors"></span></b>
                                  </li>
                                  <li>Invalid Data validation:
                                    <b><span class="invalidErrors"></span></b>
                                  </li>
                                </ul>
                              </div>
                            </div>
                            <div class="clear"></div>
                            <hr class="invaliddata m-t-0 m-b-15" />
                            <div class="form-group col-sm-12 text-right p-t-0">
                              <a class="text-primary c-pointer download-file" id="dwn-format" title="Click here to download"><i class="fa fa-download text-primary"></i> Download Template</a>
                            </div>
                          </div>
                          <div class="clear"></div>
                        </form>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Modal -->
        <!-- Modal -->
        <div class="modal fade" id="myModal" role="dialog">
          <div class="modal-dialog">

            <!-- Modal content-->
            <div class="modal-content">
              <div class="modal-header">
                <!-- <button type="button" class="close" data-dismiss="modal">&times;</button> -->
                <h4 class="modal-title">Upload</h4>
              </div>
              <div class="modal-body">
                <div class="progress skill-bar ">
                  <div class="progress-bar progress-bar-success" role="progressbar" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100">
                      <span class="skill">Uploading <i class="val">100%</i></span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

      </div>
    </div>
  </div>
{% endblock %}
{% block contentscript %}
  <script src="/files/knowledge/common/js/multiselect/bootstrap-multiselect.js"></script>
  <!-- Toastr js -->
  <script src="/files/knowledge/common/js/toastr/toastr.min.js"></script>

  <script type="text/javascript">

    function import_toast() {
      toastr.options = {
          "closeButton": false,
          "debug": false,
          "newestOnTop": false,
          "progressBar": false,
          "positionClass": "toast-top-center",
          "preventDuplicates": false,
          "onclick": null,
          "showDuration": "500",
          "hideDuration": "1000",
          "timeOut": "5000",
          "extendedTimeOut": "1000",
          "showEasing": "swing",
          "hideEasing": "linear",
          "showMethod": "fadeIn",
          "hideMethod": "fadeOut"
      };
      return toastr;
    }

    function displayMessage(message) {
        // $('.error-message').text(message);
        // $('.error-message').show();
        if ($('.toast-error').css('display') == "block") {
            $('.toast').remove();
        }
        var toastPan = import_toast();
        Command: toastPan["error"](message)
    }

  </script>
  <script type="text/javascript" src="/script/js/common-functions.js"></script>
  <script type="text/javascript" src="/script/bulk-upload/client-unit-bulk-upload/client-unit-bulk-upload.js"></script>
  <script src="/script/common/js/custombox/custombox.min.js"></script>
  <!-- Toastr js -->
  <script src="/script/common/js/toastr/toastr.min.js"></script>
  <script src="/script/common/js/jquery.core.js"></script>
  <script src="/script/common/js/jquery.app.js"></script>
  <script src="/script/common/js/download_dropdown.js"></script>

{% endblock %}