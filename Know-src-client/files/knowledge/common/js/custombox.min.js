//!function(a,b){"object"==typeof exports&&"undefined"!=typeof module?module.exports=b():"function"==typeof define&&define.amd?define(b):a.Custombox=b()}(this,function(){"use strict";var a={target:null,cache:!1,escKey:!0,zIndex:9999,overlay:!0,overlayColor:"#000",overlayOpacity:.8,overlayClose:!0,overlaySpeed:300,overlayEffect:"auto",width:null,effect:"fadein",position:["center","center"],animation:null,speed:500,loading:!1,open:null,complete:null,close:null},b={oldIE:navigator.appVersion.indexOf("MSIE 8.")>-1||navigator.appVersion.indexOf("MSIE 9.")>-1,oldMobile:/(iPhone|iPad|iPod)\sOS\s6/.test(navigator.userAgent),overlay:{perspective:["letmein","makeway","slip"],together:["corner","slidetogether","scale","door","push","contentscale","simplegenie","slit","slip"]},modal:{position:["slide","flip","rotate"],animationend:["swell","rotatedown","flash"]}},c={set:function(c){if(this.cb&&this.cb.length||(this.cb=[],this.item=-1),this.item++,c&&"auto"===c.zIndex){for(var d=0,e=0,f=document.getElementsByTagName("*"),g=f.length;g>e;e+=1){var h=window.getComputedStyle(f[e]).getPropertyValue("z-index");h&&(h=+h,h>d&&(d=h))}c.zIndex=d}this.cb.push({settings:b.oldIE&&"undefined"!=typeof cbExtendObjects?cbExtendObjects({},a,c):Object.assign({},a,c)}),"auto"===this.cb[this.item].settings.overlayEffect&&(this.cb[this.item].settings.overlayEffect=this.cb[this.item].settings.effect)},get:function(){return this.cb[this.cb.length-1]||null},init:function(){document.documentElement.classList.add("custombox-open"),document.documentElement.classList.add("custombox-open-"+this.cb[this.item].settings.overlayEffect),b.overlay.perspective.indexOf(this.cb[this.item].settings.overlayEffect)>-1&&(this.cb[this.item].scroll=document.documentElement&&document.documentElement.scrollTop||document.body&&document.body.scrollTop||0,document.documentElement.classList.add("custombox-perspective"),window.scrollTo(0,0)),this.main||this.built("container"),this.cb[this.item].settings.loading&&this.cb[this.item].settings.loading.parent&&this.built("loading"),this.cb[this.item].settings.overlay?this.built("overlay").built("modal").open():this.built("modal").open(),this.binds()},zIndex:function(){for(var a=0,b=0,c=document.getElementsByTagName("*"),d=c.length;d>b;b+=1){var e=window.getComputedStyle(c[b]).getPropertyValue("z-index");e&&(e=+e,e>a&&(a=e))}return a},built:function(a){var c;switch("undefined"!=typeof this.item&&(c=this.cb[this.item]),a){case"container":for(this.main=document.createElement("div");document.body.firstChild;)this.main.appendChild(document.body.firstChild);document.body.appendChild(this.main);break;case"overlay":c.overlay||(c.overlay={}),c.overlay=document.createElement("div"),c.overlay.classList.add("custombox-overlay"),c.overlay.classList.add("custombox-overlay-"+c.settings.overlayEffect),c.overlay.style.zIndex=c.settings.zIndex+2,c.overlay.style.backgroundColor=c.settings.overlayColor,b.overlay.perspective.indexOf(c.settings.overlayEffect)>-1||b.overlay.together.indexOf(c.settings.overlayEffect)>-1?c.overlay.style.opacity=c.settings.overlayOpacity:c.overlay.classList.add("custombox-overlay-default"),c.overlay.style.transitionDuration=b.overlay.together.indexOf(c.settings.overlayEffect)>-1?c.settings.speed+"ms":c.settings.overlaySpeed+"ms",document.body.insertBefore(c.overlay,document.body.lastChild.nextSibling);break;case"modal":"push"===c.settings.overlayEffect&&(this.main.style.transitionDuration=c.settings.speed+"ms"),this.main.classList.add("custombox-container"),this.main.classList.add("custombox-container-"+c.settings.overlayEffect),c.wrapper=document.createElement("div"),c.wrapper.classList.add("custombox-modal-wrapper"),c.wrapper.classList.add("custombox-modal-wrapper-"+c.settings.effect),c.wrapper.style.zIndex=c.settings.zIndex+3,document.body.insertBefore(c.wrapper,document.body.lastChild.nextSibling),c.container=document.createElement("div"),c.container.classList.add("custombox-modal-container"),c.container.classList.add("custombox-modal-container-"+c.settings.effect),c.container.style.zIndex=c.settings.zIndex+4,b.modal.position.indexOf(c.settings.effect)>-1&&null===c.settings.animation&&(c.settings.animation="slide"===c.settings.effect?["top"]:"flip"===c.settings.effect?["horizontal"]:["bottom"]),c.modal=document.createElement("div"),c.modal.classList.add("custombox-modal"),c.modal.classList.add("custombox-modal-"+c.settings.effect+(b.modal.position.indexOf(c.settings.effect)>-1?"-"+c.settings.animation[0].trim():"")),c.modal.style.transitionDuration=c.settings.speed+"ms",c.modal.style.zIndex=c.settings.zIndex+4,c.wrapper.appendChild(c.container).appendChild(c.modal);break;case"loading":this.loading=document.createElement("div"),this.loading.classList.add("custombox-loading");for(var d=document.createElement("div"),e=0,f=this.cb[this.item].settings.loading.parent.length;f>e;e++)d.classList.add(this.cb[this.item].settings.loading.parent[e]);if(this.loading.appendChild(d),this.loading.style.zIndex=c.settings.zIndex+3,this.cb[this.item].settings.loading.childrens)for(var g=0,h=this.cb[this.item].settings.loading.childrens.length;h>g;g++){for(var i=document.createElement("div"),j=0,k=this.cb[this.item].settings.loading.childrens[g].length;k>j;j++)i.classList.add(this.cb[this.item].settings.loading.childrens[g][j]);d.appendChild(i)}document.body.appendChild(this.loading)}return this},load:function(){var a=this.cb[this.item];if("function"==typeof a.settings.open&&a.settings.open.call(),document.createEvent){var b=document.createEvent("Event");b.initEvent("custombox.open",!0,!0),document.dispatchEvent(b)}return null!==a.settings.target&&Array.isArray(a.settings.position)?"#"===a.settings.target.charAt(0)||"."===a.settings.target.charAt(0)&&"/"!==a.settings.target.charAt(1)?document.querySelector(a.settings.target)?(a.inline=document.createElement("div"),a.content=document.querySelector(a.settings.target),a.display="none"===a.content.style.display,a.content.style.display="block",a.content.parentNode.insertBefore(a.inline,a.content),this.size()):this.error():this.ajax():this.error(),this},size:function(){var a=this.cb[this.item],c=a.content.offsetWidth;if(b.oldIE&&(window.innerHeight=document.documentElement.clientHeight),a.inline||(b.oldIE?a.content.style.styleFloat="none":a.content.style.cssFloat="none"),null!==a.settings.width&&(isNaN(a.settings.width)?(c=window.innerWidth,a.content.style.height=window.innerHeight+"px"):c=parseInt(a.settings.width,0)),a.size=c,a.size+60>=window.innerWidth){a.container.style.width="auto","full"!==a.settings.width&&(a.container.style.margin="5%"),a.wrapper.style.width=window.innerWidth+"px";for(var d=0,e=a.content.querySelectorAll(":scope > *"),f=e.length;f>d;d++)e[d].offsetWidth>window.innerWidth&&(e[d].style.width="auto")}else{switch(a.settings.position[0].trim()){case"left":a.container.style.marginLeft=0;break;case"right":a.container.style.marginRight=0}a.container.style.width=a.size+"px"}if(a.content.style.width="auto",a.modal.appendChild(a.content),a.content.offsetHeight>=window.innerHeight&&"full"!==a.settings.width)a.container.style.marginTop="5%",a.container.style.marginBottom="5%";else{var g;switch(a.settings.position[1].trim()){case"top":g=0;break;case"bottom":g=window.innerHeight-a.content.offsetHeight+"px";break;default:g=window.innerHeight/2-a.content.offsetHeight/2+"px"}a.container.style.marginTop=g}this.loading&&(document.body.removeChild(this.loading),delete this.loading),a.wrapper.classList.add("custombox-modal-open")},ajax:function(){var a=this,c=a.cb[a.item],d=new XMLHttpRequest,e=document.createElement("div");d.onreadystatechange=function(){4===d.readyState&&(200===d.status?(e.innerHTML=d.responseText,c.content=e,c.content.style.display="block",b.oldIE?c.content.style.styleFloat="left":c.content.style.cssFloat="left",c.container.appendChild(c.content),a.size()):a.error())},d.open("GET",c.settings.target+(c.settings.cache?"":(/[?].+=/.test(c.settings.target)?"&_=":"?_=")+Date.now()),!0),d.setRequestHeader("X-Requested-With","XMLHttpRequest"),d.send(null)},scrollbar:function(){var a=document.createElement("div");a.classList.add("custombox-scrollbar"),document.body.appendChild(a);var b=a.offsetWidth-a.clientWidth;return document.body.removeChild(a),b},open:function(){var a=this,c=a.cb[a.item],d=a.scrollbar();if(d&&(document.body.style.paddingRight=d+"px"),a.main.classList.add("custombox-container-open"),c.settings.overlay)if(b.overlay.perspective.indexOf(c.settings.overlayEffect)>-1||b.overlay.together.indexOf(c.settings.overlayEffect)>-1?c.overlay.classList.add("custombox-overlay-open"):c.overlay.style.opacity=c.settings.overlayOpacity,b.overlay.together.indexOf(c.settings.overlayEffect)>-1||b.oldIE)a.load(),c.inline&&c.wrapper.classList.add("custombox-modal-open");else{var e=function(){c.overlay.removeEventListener("transitionend",e),a.load(),c.inline&&c.wrapper.classList.add("custombox-modal-open")};c.overlay.addEventListener("transitionend",e,!1)}else a.load(),c.inline&&c.wrapper.classList.add("custombox-modal-open");return a},clean:function(a){var c=this,d=this.cb[a];if(document.documentElement.classList.remove("custombox-open-"+d.settings.overlayEffect),d.settings.overlay&&(d.overlay.style.opacity&&(d.overlay.style.opacity=0),d.overlay.classList.remove("custombox-overlay-open"),c.main.classList.remove("custombox-container-open")),b.oldIE||b.oldMobile||!d.overlay)c.remove(a);else{var e=function(){d.overlay.removeEventListener("transitionend",e),c.remove(a)};d.overlay.addEventListener("transitionend",e,!1)}},remove:function(a){var c=this,d=this.cb[a];if(1===c.cb.length&&(document.documentElement.classList.remove("custombox-open","custombox-perspective"),c.scrollbar()&&(document.body.style.paddingRight=0),"undefined"!=typeof d.scroll&&window.scrollTo(0,d.scroll)),d.inline&&(b.oldIE?(d.content.style.removeAttribute("width"),d.content.style.removeAttribute("height"),d.content.style.removeAttribute("display")):(d.content.style.removeProperty("width"),d.content.style.removeProperty("height"),d.content.style.removeProperty("display")),d.display&&(d.content.style.display="none"),d.inline.parentNode.replaceChild(d.content,d.inline)),c.main.classList.remove("custombox-container-"+d.settings.overlayEffect),d.wrapper.parentNode.removeChild(d.wrapper),d.settings.overlay&&d.overlay.parentNode.removeChild(d.overlay),"function"==typeof d.settings.close&&d.settings.close.call(),document.createEvent){var e=document.createEvent("Event");e.initEvent("custombox.close",!0,!0),document.dispatchEvent(e)}if(1===c.cb.length){for(var f=document.querySelectorAll(".custombox-container > *"),g=0,h=f.length;h>g;g++)document.body.insertBefore(f[g],c.main);c.main.parentNode&&c.main.parentNode.removeChild(c.main),delete c.main}c.cb.splice(a,1)},close:function(a){var c,d=this;if(a){for(var e=0,f=this.cb.length;f>e;e++)if(this.cb[e].settings.target===a){c=e;break}}else c=d.cb.length-1;var g=d.cb[c];if(b.modal.position.indexOf(g.settings.effect)>-1&&g.settings.animation.length>1&&(g.modal.classList.remove("custombox-modal-"+g.settings.effect+"-"+g.settings.animation[0]),g.modal.classList.add("custombox-modal-"+g.settings.effect+"-"+g.settings.animation[1].trim())),g.wrapper.classList.remove("custombox-modal-open"),b.oldIE||b.oldMobile||b.overlay.together.indexOf(g.settings.overlayEffect)>-1)d.clean(c);else{var h=function(){g.wrapper.removeEventListener("transitionend",h),d.clean(c)};b.modal.animationend.indexOf(g.settings.effect)>-1?g.wrapper.addEventListener("animationend",h,!1):g.wrapper.addEventListener("transitionend",h,!1)}},responsive:function(){b.oldIE&&(window.innerHeight=document.documentElement.clientHeight);for(var a,c=0,d=this.cb.length;d>c;c++){if(this.cb[c].size+60>=window.innerWidth)"full"!==this.cb[c].settings.width&&(this.cb[c].container.style.marginLeft="5%",this.cb[c].container.style.marginRight="5%"),this.cb[c].container.style.width="auto",this.cb[c].wrapper.style.width=window.innerWidth+"px";else{switch(this.cb[c].settings.position[0].trim()){case"left":this.cb[c].container.style.marginLeft=0;break;case"right":this.cb[c].container.style.marginRight=0;break;default:this.cb[c].container.style.marginLeft="auto",this.cb[c].container.style.marginRight="auto"}this.cb[c].container.style.width=this.cb[c].size+"px",this.cb[c].wrapper.style.width="auto"}if(this.cb[c].content.offsetHeight>=window.innerHeight&&"full"!==this.cb[c].settings.width)this.cb[c].container.style.marginTop="5%",this.cb[c].container.style.marginBottom="5%";else{switch(this.cb[c].settings.position[1].trim()){case"top":a=0;break;case"bottom":a=window.innerHeight-this.cb[c].content.offsetHeight+"px";break;default:a=window.innerHeight/2-this.cb[c].content.offsetHeight/2+"px"}this.cb[c].container.style.marginTop=a}}},binds:function(){var a=this,c=a.cb[a.item],d=!1;1===a.cb.length&&(a.esc=function(b){1===a.cb.length&&document.removeEventListener("keydown",a.esc),b=b||window.event,!d&&27===b.keyCode&&a.get()&&a.get().settings.escKey&&(d=!0,a.close())},document.addEventListener("keydown",a.esc,!1),window.addEventListener("onorientationchange"in window?"orientationchange":"resize",function(){a.responsive()},!1)),c.wrapper.event=function(b){1===a.cb.length&&document.removeEventListener("keydown",c.wrapper.event),!d&&b.target===c.wrapper&&a.get()&&a.get().settings.overlayClose&&(d=!0,a.close())},c.wrapper.addEventListener("click",c.wrapper.event,!1),document.addEventListener("custombox.close",function(){d=!1});var e=function(){if(!c.inline)for(var a=0,b=c.modal.getElementsByTagName("script"),d=b.length;d>a;a++)new Function(b[a].text)();if(c.settings&&"function"==typeof c.settings.complete&&c.settings.complete.call(),document.createEvent){var e=document.createEvent("Event");e.initEvent("custombox.complete",!0,!0),document.dispatchEvent(e)}},f=function(){e(),c.modal.removeEventListener("transitionend",f)};b.oldIE||b.oldMobile?setTimeout(function(){e()},c.settings.overlaySpeed):"slit"!==c.settings.effect?c.modal.addEventListener("transitionend",f,!1):c.modal.addEventListener("animationend",f,!1)},error:function(){var a=this,b=a.cb.length-1;alert("Error to load this target: "+a.cb[b].settings.target),a.remove(b)}};return{set:function(a){a.autobuild&&c.built("container")},open:function(a){c.set(a),c.init(), $('#toast-container').remove()},close:function(a){c.close(a), $('#toast-container').remove()}}});
// var Custombox=function(a,b,c){"use strict";var d={create:document.createElement,settings:[],overlay:[],wrapper:[],container:[],modal:[],content:[],inline:[],size:[],close:[],open:[],scroll:[],item:-1},e={target:null,id:null,cache:!1,escKey:!0,zIndex:"auto",overlay:!0,overlayColor:"#000",overlayOpacity:.8,overlayClose:!0,overlaySpeed:300,overlayEffect:"auto",width:null,effect:"fadein",position:"center, center",animation:null,speed:500,open:null,complete:null,close:null},f={oldIE:navigator.appVersion.indexOf("MSIE 8.")>-1||navigator.appVersion.indexOf("MSIE 9.")>-1,oldMobile:/(iPhone|iPad|iPod)\sOS\s6/.test(navigator.userAgent),overlay:{perspective:["letmein","makeway","slip"],together:["corner","slidetogether","scale","door","push","contentscale","simplegenie","slit","slip"]},modal:{position:["slide","flip","rotate"]}},g={init:function(){this.merge().built().check().binds()},merge:function(){return d.settings.push(h.extend({},e,d.options)),delete d.options,d.item=d.settings.length-1,"auto"===d.settings[d.item].overlayEffect&&(d.settings[d.item].overlayEffect=d.settings[d.item].effect),this},built:function(){var e=h.zIndex();if(c.classList.add("custombox-open"),c.classList.add("custombox-open-"+d.settings[d.item].overlayEffect),f.overlay.perspective.indexOf(d.settings[d.item].overlayEffect)>-1&&(d.scroll.push(c&&c.scrollTop||b.body&&b.body.scrollTop||0),c.classList.add("custombox-perspective"),a.scrollTo(0,0)),!d.item){for(d.main=d.create.call(b,"div");b.body.firstChild;)d.main.appendChild(b.body.firstChild);b.body.appendChild(d.main)}return"push"===d.settings[d.item].overlayEffect&&(d.main.style.transitionDuration=d.settings[d.item].speed+"ms"),d.main.classList.add("custombox-container"),d.main.classList.add("custombox-container-"+d.settings[d.item].overlayEffect),d.settings[d.item].overlay?(d.overlay.push(d.create.call(b,"div")),d.overlay[d.item].classList.add("custombox-overlay"),d.overlay[d.item].classList.add("custombox-overlay-"+d.settings[d.item].overlayEffect),d.overlay[d.item].style.zIndex=e+2,d.overlay[d.item].style.backgroundColor=d.settings[d.item].overlayColor,d.overlay[d.item].dataset.custombox=d.settings[d.item].id,f.overlay.perspective.indexOf(d.settings[d.item].overlayEffect)>-1||f.overlay.together.indexOf(d.settings[d.item].overlayEffect)>-1?d.overlay[d.item].style.opacity=d.settings[d.item].overlayOpacity:d.overlay[d.item].classList.add("custombox-overlay-default"),d.overlay[d.item].style.transitionDuration=f.overlay.together.indexOf(d.settings[d.item].overlayEffect)>-1?d.settings[d.item].speed+"ms":d.settings[d.item].overlaySpeed+"ms",b.body.insertBefore(d.overlay[d.item],b.body.lastChild.nextSibling)):d.overlay.push(null),d.wrapper.push(d.create.call(b,"div")),d.wrapper[d.item].classList.add("custombox-modal-wrapper"),d.wrapper[d.item].classList.add("custombox-modal-wrapper-"+d.settings[d.item].effect),d.wrapper[d.item].style.zIndex=e+3,d.wrapper[d.item].dataset.custombox=d.settings[d.item].id,b.body.insertBefore(d.wrapper[d.item],b.body.lastChild.nextSibling),d.container.push(d.create.call(b,"div")),d.container[d.item].classList.add("custombox-modal-container"),d.container[d.item].classList.add("custombox-modal-container-"+d.settings[d.item].effect),d.container[d.item].style.zIndex=e+4,f.modal.position.indexOf(d.settings[d.item].effect)>-1&&(d.settings[d.item].animation=null!==d.settings[d.item].animation?d.settings[d.item].animation.indexOf(",")>-1?d.settings[d.item].animation.split(","):[d.settings[d.item].animation]:"slide"===d.settings[d.item].effect?["top"]:"flip"===d.settings[d.item].effect?["horizontal"]:["bottom"]),d.modal.push(d.create.call(b,"div")),d.modal[d.item].classList.add("custombox-modal"),d.modal[d.item].classList.add("custombox-modal-"+d.settings[d.item].effect+(f.modal.position.indexOf(d.settings[d.item].effect)>-1?"-"+d.settings[d.item].animation[0].trim():"")),d.modal[d.item].style.transitionDuration=d.settings[d.item].speed+"ms",d.modal[d.item].style.zIndex=e+4,d.wrapper[d.item].appendChild(d.container[d.item]).appendChild(d.modal[d.item]),this},check:function(){if("function"==typeof d.settings[d.item].open&&d.settings[d.item].open.call(),b.createEvent){var a=b.createEvent("Event");a.initEvent("custombox.open",!0,!0),b.dispatchEvent(a)}return d.settings[d.item].position.indexOf(",")>-1?(d.settings[d.item].position=d.settings[d.item].position.split(","),"#"===d.settings[d.item].target.charAt(0)||"."===d.settings[d.item].target.charAt(0)&&"/"!==d.settings[d.item].target.charAt(1)?b.querySelector(d.settings[d.item].target)?(d.inline.push(d.create.call(b,"div")),d.content.push(b.querySelector(d.settings[d.item].target)),d.content[d.item].style.display="block",d.content[d.item].parentNode.insertBefore(d.inline[d.item],d.content[d.item]),this.size().open()):this.error():this.ajax()):this.error(),this},ajax:function(){var a=this,c=new XMLHttpRequest,e=d.create.call(b,"div");c.onreadystatechange=function(){4===c.readyState&&(200===c.status?(e.innerHTML=c.responseText,d.content.push(e),d.content[d.item].style.display="block",f.oldIE?d.content[d.item].style.styleFloat="left":d.content[d.item].style.cssFloat="left",d.container[d.item].appendChild(d.content[d.item]),a.size().open()):a.error())},c.open("GET",d.settings[d.item].target+(d.settings[d.item].cache?"":"?_="+Date.now()),!0),c.setRequestHeader("X-Requested-With","XMLHttpRequest"),c.send(null)},size:function(){f.oldIE&&(a.innerHeight=c.clientHeight);var b=d.content[d.item].offsetWidth;if(d.inline[d.item]||(f.oldIE?d.content[d.item].style.styleFloat="none":d.content[d.item].style.cssFloat="none"),isNaN(d.settings[d.item].width)||null===d.settings[d.item].width||(b=parseInt(d.settings[d.item].width,0)),d.size.push(b),d.size[d.item]+60>=a.innerWidth){d.container[d.item].style.width="auto",d.container[d.item].style.margin="5%",d.wrapper[d.item].style.width=a.innerWidth+"px";for(var e=0,g=d.content[d.item].querySelectorAll(":scope > *"),h=g.length;h>e;e++)g[e].offsetWidth>a.innerWidth&&(g[e].style.width="auto")}else{switch(d.settings[d.item].position[0].trim()){case"left":d.container[d.item].style.marginLeft=0;break;case"right":d.container[d.item].style.marginRight=0}d.container[d.item].style.width=d.size[d.item]+"px"}if(d.content[d.item].style.width="auto",d.modal[d.item].appendChild(d.content[d.item]),d.content[d.item].offsetHeight>=a.innerHeight)d.container[d.item].style.marginTop="5%",d.container[d.item].style.marginBottom="5%";else{var i;switch(d.settings[d.item].position[1].trim()){case"top":i=0;break;case"bottom":i=a.innerHeight-d.content[d.item].offsetHeight+"px";break;default:i=a.innerHeight/2-d.content[d.item].offsetHeight/2+"px"}d.container[d.item].style.marginTop=i}return this},open:function(){if(d.settings[d.item].overlay)if(f.overlay.perspective.indexOf(d.settings[d.item].overlayEffect)>-1||f.overlay.together.indexOf(d.settings[d.item].overlayEffect)>-1?d.overlay[d.item].classList.add("custombox-overlay-open"):d.overlay[d.item].style.opacity=d.settings[d.item].overlayOpacity,d.main.classList.add("custombox-container-open"),f.overlay.together.indexOf(d.settings[d.item].overlayEffect)>-1||f.oldIE)d.wrapper[d.item].classList.add("custombox-modal-open");else{var a=function(){d.overlay[d.item].removeEventListener("transitionend",a),d.wrapper[d.item].classList.add("custombox-modal-open")};d.overlay[d.item].addEventListener("transitionend",a,!1)}else d.wrapper[d.item].classList.add("custombox-modal-open"),d.main.classList.add("custombox-container-open");return this},binds:function(){var c=this;d.settings[d.item].escKey&&(b.onkeydown=function(b){b=b||a.event,27===b.keyCode&&c.close()}),d.settings[d.item].overlayClose&&d.wrapper[d.item].addEventListener("click",function(a){a.target===d.wrapper[d.item]&&c.close()},!1),a.addEventListener("onorientationchange"in a?"orientationchange":"resize",function(){c.responsive()},!1);var e=function(){if(!d.inline[d.item])for(var a=0,c=d.modal[d.item].getElementsByTagName("script"),e=c.length;e>a;a++)new Function(c[a].text)();if(d.settings[d.item]&&"function"==typeof d.settings[d.item].complete&&d.settings[d.item].complete.call(),b.createEvent){var f=b.createEvent("Event");f.initEvent("custombox.complete",!0,!0),b.dispatchEvent(f)}},g=function(){e(),d.modal[d.item].removeEventListener("transitionend",g)};f.oldIE||f.oldMobile?setTimeout(function(){e()},d.settings[d.item].overlaySpeed):"slit"!==d.settings[d.item].effect?d.modal[d.item].addEventListener("transitionend",g,!1):d.modal[d.item].addEventListener("animationend",g,!1)},close:function(e){var g;if("first"===e)g=0;else if("undefined"!=typeof e){for(var h=0,i=d.settings.length;i>h;h++)if(d.settings[h].id==e){g=h;break}void 0===g&&(g=d.settings.length-1)}else g=d.settings.length-1;var j=function(){if(c.classList.remove("custombox-open-"+d.settings[g].overlayEffect),d.settings[g].overlay&&(d.overlay[g].classList.add("custombox-overlay-close"),d.overlay[g].style.opacity&&(d.overlay[g].style.opacity=0),d.overlay[g].classList.remove("custombox-overlay-open"),d.main.classList.remove("custombox-container-open")),f.oldIE||f.oldMobile||!d.overlay[g])k();else{var a=function(){d.overlay[g].removeEventListener("transitionend",a),k()};d.overlay[g].addEventListener("transitionend",a,!1)}},k=function(){if(1===d.settings.length&&(c.classList.remove("custombox-perspective"),c.classList.remove("custombox-open"),"undefined"!=typeof d.scroll[g]&&a.scrollTo(0,d.scroll[g])),c.classList.remove("custombox-open-"+d.settings[g].overlayEffect),d.inline[g]&&(f.oldIE?(d.content[g].style.removeAttribute("width"),d.content[g].style.removeAttribute("display")):(d.content[g].style.removeProperty("width"),d.content[g].style.removeProperty("display")),d.inline[g].parentNode.replaceChild(d.content[g],d.inline[g])),d.main.classList.remove("custombox-container-"+d.settings[g].overlayEffect),d.wrapper[g].parentNode.removeChild(d.wrapper[g]),d.settings[g].overlay&&d.overlay[g].parentNode.removeChild(d.overlay[g]),"function"==typeof d.settings[g].close&&d.settings[g].close.call(),b.createEvent){var e=b.createEvent("Event");e.initEvent("custombox.close",!0,!0),b.dispatchEvent(e)}if(1===d.settings.length){for(var h=b.querySelectorAll(".custombox-container > *"),i=0,j=h.length;j>i;i++)document.body.insertBefore(h[i],d.main);d.main.parentNode&&d.main.parentNode.removeChild(d.main)}d.wrapper.splice(g,1),d.inline[g]&&d.inline.splice(g,1),d.content.splice(g,1),d.container.splice(g,1),d.modal.splice(g,1),d.overlay.splice(g,1),d.size.splice(g,1),d.settings.splice(g,1),d.scroll.splice(g,1)};if(f.modal.position.indexOf(d.settings[g].effect)>-1&&d.settings[g].animation.length>1&&(d.modal[g].classList.remove("custombox-modal-"+d.settings[g].effect+"-"+d.settings[g].animation[0]),d.modal[g].classList.add("custombox-modal-"+d.settings[g].effect+"-"+d.settings[g].animation[1].trim())),d.wrapper[g].classList.remove("custombox-modal-open"),f.oldIE||f.oldMobile||f.overlay.together.indexOf(d.settings[g].overlayEffect)>-1)j();else{var l=function(){d.wrapper[g].removeEventListener("transitionend",l),j()};d.wrapper[g].addEventListener("transitionend",l,!1)}},responsive:function(){f.oldIE&&(a.innerHeight=c.clientHeight);for(var b,e=0,g=d.container.length;g>e;e++){if(d.size[e]+60>=a.innerWidth)d.container[e].style.width="auto",d.container[e].style.marginLeft="5%",d.container[e].style.marginRight="5%",d.wrapper[d.item].style.width=a.innerWidth+"px";else{switch(d.settings[d.item].position[0].trim()){case"left":d.container[e].style.marginLeft=0;break;case"right":d.container[e].style.marginRight=0;break;default:d.container[e].style.marginLeft="auto",d.container[e].style.marginRight="auto"}d.container[e].style.width=d.size[e]+"px",d.wrapper[d.item].style.width="auto"}if(d.content[e].offsetHeight>=a.innerHeight)d.container[e].style.marginTop="5%",d.container[e].style.marginBottom="5%";else{switch(d.settings[d.item].position[1]){case"top":b=0;break;case"bottom":b=a.innerHeight-d.content[e].offsetHeight+"px";break;default:b=a.innerHeight/2-d.content[e].offsetHeight/2+"px"}d.container[e].style.marginTop=b}}},error:function(){alert("Error to load this target: "+d.settings[d.item].target)}},h={zIndex:function(){a.getComputedStyle||(a.getComputedStyle=function(a){return this.el=a,this.getPropertyValue=function(b){var c=/(\-([a-z]){1})/g;return"float"==b&&(b="styleFloat"),c.test(b)&&(b=b.replace(c,function(){return arguments[2].toUpperCase()})),a.currentStyle[b]?a.currentStyle[b]:null},this});var b=0;if(isNaN(d.settings[d.item].zIndex))for(var c=0,e=document.getElementsByTagName("*"),f=e.length;f>c;c+=1){var g=a.getComputedStyle(e[c]).getPropertyValue("z-index");g&&(g=+g,g>b&&(b=g))}else b=d.settings[d.item].zIndex;return b},extend:function(){for(var a=1,b=arguments.length;b>a;a++)for(var c in arguments[a])arguments[a].hasOwnProperty(c)&&(arguments[0][c]=arguments[a][c]);return arguments[0]}};return{open:function(a){d.options=a,g.init()},close:function(a){g.close(a)}}}(window,document,document.documentElement);
var Custombox=function(a,b,c){"use strict";var d={create:document.createElement,settings:[],overlay:[],wrapper:[],container:[],modal:[],content:[],inline:[],size:[],close:[],open:[],scroll:[],item:-1},e={target:null,id:null,cache:!1,escKey:!0,zIndex:10000,overlay:!0,overlayColor:"#000",overlayOpacity:.8,overlayClose:!0,overlaySpeed:300,overlayEffect:"auto",width:null,effect:"fadein",position:"center, center",animation:null,speed:500,open:null,complete:null,close:null},f={oldIE:navigator.appVersion.indexOf("MSIE 8.")>-1||navigator.appVersion.indexOf("MSIE 9.")>-1,oldMobile:/(iPhone|iPad|iPod)\sOS\s6/.test(navigator.userAgent),overlay:{perspective:["letmein","makeway","slip"],together:["corner","slidetogether","scale","door","push","contentscale","simplegenie","slit","slip"]},modal:{position:["slide","flip","rotate"]}},g={init:function(){this.merge().built().check().binds()},merge:function(){return d.settings.push(h.extend({},e,d.options)),delete d.options,d.item=d.settings.length-1,"auto"===d.settings[d.item].overlayEffect&&(d.settings[d.item].overlayEffect=d.settings[d.item].effect),this},built:function(){var e=h.zIndex();if(c.classList.add("custombox-open"),c.classList.add("custombox-open-"+d.settings[d.item].overlayEffect),f.overlay.perspective.indexOf(d.settings[d.item].overlayEffect)>-1&&(d.scroll.push(c&&c.scrollTop||b.body&&b.body.scrollTop||0),c.classList.add("custombox-perspective"),a.scrollTo(0,0)),!d.item){for(d.main=d.create.call(b,"div");b.body.firstChild;)d.main.appendChild(b.body.firstChild);b.body.appendChild(d.main)}return"push"===d.settings[d.item].overlayEffect&&(d.main.style.transitionDuration=d.settings[d.item].speed+"ms"),d.main.classList.add("custombox-container"),d.main.classList.add("custombox-container-"+d.settings[d.item].overlayEffect),d.settings[d.item].overlay?(d.overlay.push(d.create.call(b,"div")),d.overlay[d.item].classList.add("custombox-overlay"),d.overlay[d.item].classList.add("custombox-overlay-"+d.settings[d.item].overlayEffect),d.overlay[d.item].style.zIndex=e+2,d.overlay[d.item].style.backgroundColor=d.settings[d.item].overlayColor,d.overlay[d.item].dataset.custombox=d.settings[d.item].id,f.overlay.perspective.indexOf(d.settings[d.item].overlayEffect)>-1||f.overlay.together.indexOf(d.settings[d.item].overlayEffect)>-1?d.overlay[d.item].style.opacity=d.settings[d.item].overlayOpacity:d.overlay[d.item].classList.add("custombox-overlay-default"),d.overlay[d.item].style.transitionDuration=f.overlay.together.indexOf(d.settings[d.item].overlayEffect)>-1?d.settings[d.item].speed+"ms":d.settings[d.item].overlaySpeed+"ms",b.body.insertBefore(d.overlay[d.item],b.body.lastChild.nextSibling)):d.overlay.push(null),d.wrapper.push(d.create.call(b,"div")),d.wrapper[d.item].classList.add("custombox-modal-wrapper"),d.wrapper[d.item].classList.add("custombox-modal-wrapper-"+d.settings[d.item].effect),d.wrapper[d.item].style.zIndex=e+3,d.wrapper[d.item].dataset.custombox=d.settings[d.item].id,b.body.insertBefore(d.wrapper[d.item],b.body.lastChild.nextSibling),d.container.push(d.create.call(b,"div")),d.container[d.item].classList.add("custombox-modal-container"),d.container[d.item].classList.add("custombox-modal-container-"+d.settings[d.item].effect),d.container[d.item].style.zIndex=e+4,f.modal.position.indexOf(d.settings[d.item].effect)>-1&&(d.settings[d.item].animation=null!==d.settings[d.item].animation?d.settings[d.item].animation.indexOf(",")>-1?d.settings[d.item].animation.split(","):[d.settings[d.item].animation]:"slide"===d.settings[d.item].effect?["top"]:"flip"===d.settings[d.item].effect?["horizontal"]:["bottom"]),d.modal.push(d.create.call(b,"div")),d.modal[d.item].classList.add("custombox-modal"),d.modal[d.item].classList.add("custombox-modal-"+d.settings[d.item].effect+(f.modal.position.indexOf(d.settings[d.item].effect)>-1?"-"+d.settings[d.item].animation[0].trim():"")),d.modal[d.item].style.transitionDuration=d.settings[d.item].speed+"ms",d.modal[d.item].style.zIndex=e+4,d.wrapper[d.item].appendChild(d.container[d.item]).appendChild(d.modal[d.item]),this},check:function(){if("function"==typeof d.settings[d.item].open&&d.settings[d.item].open.call(),b.createEvent){var a=b.createEvent("Event");a.initEvent("custombox.open",!0,!0),b.dispatchEvent(a)}return d.settings[d.item].position.indexOf(",")>-1?(d.settings[d.item].position=d.settings[d.item].position.split(","),"#"===d.settings[d.item].target.charAt(0)||"."===d.settings[d.item].target.charAt(0)&&"/"!==d.settings[d.item].target.charAt(1)?b.querySelector(d.settings[d.item].target)?(d.inline.push(d.create.call(b,"div")),d.content.push(b.querySelector(d.settings[d.item].target)),d.content[d.item].style.display="block",d.content[d.item].parentNode.insertBefore(d.inline[d.item],d.content[d.item]),this.size().open()):this.error():this.ajax()):this.error(),this},ajax:function(){var a=this,c=new XMLHttpRequest,e=d.create.call(b,"div");c.onreadystatechange=function(){4===c.readyState&&(200===c.status?(e.innerHTML=c.responseText,d.content.push(e),d.content[d.item].style.display="block",f.oldIE?d.content[d.item].style.styleFloat="left":d.content[d.item].style.cssFloat="left",d.container[d.item].appendChild(d.content[d.item]),a.size().open()):a.error())},c.open("GET",d.settings[d.item].target+(d.settings[d.item].cache?"":"?_="+Date.now()),!0),c.setRequestHeader("X-Requested-With","XMLHttpRequest"),c.send(null)},size:function(){f.oldIE&&(a.innerHeight=c.clientHeight);var b=d.content[d.item].offsetWidth;if(d.inline[d.item]||(f.oldIE?d.content[d.item].style.styleFloat="none":d.content[d.item].style.cssFloat="none"),isNaN(d.settings[d.item].width)||null===d.settings[d.item].width||(b=parseInt(d.settings[d.item].width,0)),d.size.push(b),d.size[d.item]+60>=a.innerWidth){d.container[d.item].style.width="auto",d.container[d.item].style.margin="5%",d.wrapper[d.item].style.width=a.innerWidth+"px";for(var e=0,g=d.content[d.item].querySelectorAll(":scope > *"),h=g.length;h>e;e++)g[e].offsetWidth>a.innerWidth&&(g[e].style.width="auto")}else{switch(d.settings[d.item].position[0].trim()){case"left":d.container[d.item].style.marginLeft=0;break;case"right":d.container[d.item].style.marginRight=0}d.container[d.item].style.width=d.size[d.item]+"px"}if(d.content[d.item].style.width="auto",d.modal[d.item].appendChild(d.content[d.item]),d.content[d.item].offsetHeight>=a.innerHeight)d.container[d.item].style.marginTop="5%",d.container[d.item].style.marginBottom="5%";else{var i;switch(d.settings[d.item].position[1].trim()){case"top":i=0;break;case"bottom":i=a.innerHeight-d.content[d.item].offsetHeight+"px";break;default:i=a.innerHeight/2-d.content[d.item].offsetHeight/2+"px"}d.container[d.item].style.marginTop=i}return this},open:function(){if(d.settings[d.item].overlay)if(f.overlay.perspective.indexOf(d.settings[d.item].overlayEffect)>-1||f.overlay.together.indexOf(d.settings[d.item].overlayEffect)>-1?d.overlay[d.item].classList.add("custombox-overlay-open"):d.overlay[d.item].style.opacity=d.settings[d.item].overlayOpacity,d.main.classList.add("custombox-container-open"),f.overlay.together.indexOf(d.settings[d.item].overlayEffect)>-1||f.oldIE)d.wrapper[d.item].classList.add("custombox-modal-open");else{var a=function(){d.overlay[d.item].removeEventListener("transitionend",a),d.wrapper[d.item].classList.add("custombox-modal-open")};d.overlay[d.item].addEventListener("transitionend",a,!1)}else d.wrapper[d.item].classList.add("custombox-modal-open"),d.main.classList.add("custombox-container-open");return this},binds:function(){var c=this;d.settings[d.item].escKey&&(b.onkeydown=function(b){b=b||a.event,27===b.keyCode&&c.close()}),d.settings[d.item].overlayClose&&d.wrapper[d.item].addEventListener("click",function(a){a.target===d.wrapper[d.item]&&c.close()},!1),a.addEventListener("onorientationchange"in a?"orientationchange":"resize",function(){c.responsive()},!1);var e=function(){if(!d.inline[d.item])for(var a=0,c=d.modal[d.item].getElementsByTagName("script"),e=c.length;e>a;a++)new Function(c[a].text)();if(d.settings[d.item]&&"function"==typeof d.settings[d.item].complete&&d.settings[d.item].complete.call(),b.createEvent){var f=b.createEvent("Event");f.initEvent("custombox.complete",!0,!0),b.dispatchEvent(f)}},g=function(){e(),d.modal[d.item].removeEventListener("transitionend",g)};f.oldIE||f.oldMobile?setTimeout(function(){e()},d.settings[d.item].overlaySpeed):"slit"!==d.settings[d.item].effect?d.modal[d.item].addEventListener("transitionend",g,!1):d.modal[d.item].addEventListener("animationend",g,!1)},close:function(e){var g;if("first"===e)g=0;else if("undefined"!=typeof e){for(var h=0,i=d.settings.length;i>h;h++)if(d.settings[h].id==e){g=h;break}void 0===g&&(g=d.settings.length-1)}else g=d.settings.length-1;var j=function(){if(c.classList.remove("custombox-open-"+d.settings[g].overlayEffect),d.settings[g].overlay&&(d.overlay[g].classList.add("custombox-overlay-close"),d.overlay[g].style.opacity&&(d.overlay[g].style.opacity=0),d.overlay[g].classList.remove("custombox-overlay-open"),d.main.classList.remove("custombox-container-open")),f.oldIE||f.oldMobile||!d.overlay[g])k();else{var a=function(){d.overlay[g].removeEventListener("transitionend",a),k()};d.overlay[g].addEventListener("transitionend",a,!1)}},k=function(){if(1===d.settings.length&&(c.classList.remove("custombox-perspective"),c.classList.remove("custombox-open"),"undefined"!=typeof d.scroll[g]&&a.scrollTo(0,d.scroll[g])),c.classList.remove("custombox-open-"+d.settings[g].overlayEffect),d.inline[g]&&(f.oldIE?(d.content[g].style.removeAttribute("width"),d.content[g].style.removeAttribute("display")):(d.content[g].style.removeProperty("width"),d.content[g].style.removeProperty("display")),d.inline[g].parentNode.replaceChild(d.content[g],d.inline[g])),d.main.classList.remove("custombox-container-"+d.settings[g].overlayEffect),d.wrapper[g].parentNode.removeChild(d.wrapper[g]),d.settings[g].overlay&&d.overlay[g].parentNode.removeChild(d.overlay[g]),"function"==typeof d.settings[g].close&&d.settings[g].close.call(),b.createEvent){var e=b.createEvent("Event");e.initEvent("custombox.close",!0,!0),b.dispatchEvent(e)}if(1===d.settings.length){for(var h=b.querySelectorAll(".custombox-container > *"),i=0,j=h.length;j>i;i++)document.body.insertBefore(h[i],d.main);d.main.parentNode&&d.main.parentNode.removeChild(d.main)}d.wrapper.splice(g,1),d.inline[g]&&d.inline.splice(g,1),d.content.splice(g,1),d.container.splice(g,1),d.modal.splice(g,1),d.overlay.splice(g,1),d.size.splice(g,1),d.settings.splice(g,1),d.scroll.splice(g,1)};if(f.modal.position.indexOf(d.settings[g].effect)>-1&&d.settings[g].animation.length>1&&(d.modal[g].classList.remove("custombox-modal-"+d.settings[g].effect+"-"+d.settings[g].animation[0]),d.modal[g].classList.add("custombox-modal-"+d.settings[g].effect+"-"+d.settings[g].animation[1].trim())),d.wrapper[g].classList.remove("custombox-modal-open"),f.oldIE||f.oldMobile||f.overlay.together.indexOf(d.settings[g].overlayEffect)>-1)j();else{var l=function(){d.wrapper[g].removeEventListener("transitionend",l),j()};d.wrapper[g].addEventListener("transitionend",l,!1)}},responsive:function(){f.oldIE&&(a.innerHeight=c.clientHeight);for(var b,e=0,g=d.container.length;g>e;e++){if(d.size[e]+60>=a.innerWidth)d.container[e].style.width="auto",d.container[e].style.marginLeft="5%",d.container[e].style.marginRight="5%",d.wrapper[d.item].style.width=a.innerWidth+"px";else{switch(d.settings[d.item].position[0].trim()){case"left":d.container[e].style.marginLeft=0;break;case"right":d.container[e].style.marginRight=0;break;default:d.container[e].style.marginLeft="auto",d.container[e].style.marginRight="auto"}d.container[e].style.width=d.size[e]+"px",d.wrapper[d.item].style.width="auto"}if(d.content[e].offsetHeight>=a.innerHeight)d.container[e].style.marginTop="5%",d.container[e].style.marginBottom="5%";else{switch(d.settings[d.item].position[1]){case"top":b=0;break;case"bottom":b=a.innerHeight-d.content[e].offsetHeight+"px";break;default:b=a.innerHeight/2-d.content[e].offsetHeight/2+"px"}d.container[e].style.marginTop=b}}},error:function(){alert("Error to load this target: "+d.settings[d.item].target)}},h={zIndex:function(){a.getComputedStyle||(a.getComputedStyle=function(a){return this.el=a,this.getPropertyValue=function(b){var c=/(\-([a-z]){1})/g;return"float"==b&&(b="styleFloat"),c.test(b)&&(b=b.replace(c,function(){return arguments[2].toUpperCase()})),a.currentStyle[b]?a.currentStyle[b]:null},this});var b=0;if(isNaN(d.settings[d.item].zIndex))for(var c=0,e=document.getElementsByTagName("*"),f=e.length;f>c;c+=1){var g=a.getComputedStyle(e[c]).getPropertyValue("z-index");g&&(g=+g,g>b&&(b=g))}else b=d.settings[d.item].zIndex;return b},extend:function(){for(var a=1,b=arguments.length;b>a;a++)for(var c in arguments[a])arguments[a].hasOwnProperty(c)&&(arguments[0][c]=arguments[a][c]);return arguments[0]}};return{open:function(a){d.options=a,g.init()},close:function(a){g.close(a)}}}(window,document,document.documentElement);