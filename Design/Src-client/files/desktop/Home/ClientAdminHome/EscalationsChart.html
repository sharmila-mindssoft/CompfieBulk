{% extends "files/desktop/Header/Header.html" %}
{% block content %}

<link rel="stylesheet" type="text/css" href="/css/dashboard.css">
<link rel="stylesheet" type="text/css" href="/css/multiselect/multiple-select.css">
<style>
.filtertable 
{
  width: 57%;
  margin-left: 5%;
}
.filtertable td{
  vertical-align: top; 
}
abbr
{
    border-bottom: 1px dotted #666;
    cursor: help;
}

.btn {
  background: #662d91;
  background-image: -webkit-linear-gradient(top, #662d91, #662d91);
  background-image: -moz-linear-gradient(top, #662d91, #662d91);
  background-image: -ms-linear-gradient(top, #662d91, #662d91);
  background-image: -o-linear-gradient(top, #662d91, #662d91);
  background-image: linear-gradient(to bottom, #662d91, #662d91);
  -webkit-border-radius: 7;
  -moz-border-radius: 7;
  border-radius: 7px;
  font-family: Arial;
  font-style:bold;
  color: #ffffff;
  font-size: 8px;
  padding: 7px 9px 7px 9px;
  text-decoration: none;
  border-width:0px;

}

.btn:hover {
  background: #C293E6;
  background-image: -webkit-linear-gradient(top, #C293E6, #c4c4c4);
  background-image: -moz-linear-gradient(top, #C293E6, #c4c4c4);
  background-image: -ms-linear-gradient(top, #C293E6, #c4c4c4);
  background-image: -o-linear-gradient(top, #C293E6, #c4c4c4);
  background-image: linear-gradient(to bottom, #C293E6, #c4c4c4);
  text-decoration: none;
  cursor:hand;
}

.tooltip
{
    position:absolute;
    background-color:#eeeefe;
    border: 1px solid #aaaaca;
    font-size: smaller;
    padding:4px;
    width: 160px;
    box-shadow: 1px 1px 1px rgba(0, 0, 0, 0.1);
    -moz-box-shadow: 1px 1px 1px rgba(0, 0, 0, 0.1);
    -webkit-box-shadow: 1px 1px 1px rgba(0, 0, 0, 0.1); 
}

#radiolabel {
  width: 70px;
  border-radius: 3px;
  border: 1px solid #D1D3D4;
  font-size: 11px;
}

/* hide input */
input.radio:empty {
    margin-left: -1200px;
}

/* style label */
input.radio:empty ~ label {
    position: relative; 
    float: left;
    line-height: 2.5em; 
    text-indent: 3.25em;
    margin-top: 2em;
    cursor: pointer;
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
}

input.radio:empty ~ label:before {
    position: absolute;
    display: block;
    top: 0;
    bottom: 0;
    left: 0;
    content: '';
    width: 2.5em;
    background: #D1D3D4;
    border-radius: 3px 0 0 3px;
}

/* toggle hover */
input.radio:hover:not(:checked) ~ label:before {
    content:'\2714';
    text-indent: .9em;
    color: #ffffff;
}

input.radio:hover:not(:checked) ~ label {
    color: #888;
}

/* toggle on */
input.radio:checked ~ label:before {
    content:'\2714';
    text-indent: .9em;
    color: #ffffff;
    background-color: #662d91;
}

input.radio:checked ~ label {
    color: #777;
}
.leftmargin 
{
  float: left;
  position: relative;
  width: 160px;
}
.margin10
{
  margin-top: 10px;
}
#cssmenu > ul > li:hover > ul {
  top: 46.5px !important;
}
.ms-drop ul > li label.optgroup {
  font-size: 0.75em;
  }
  .optgroup 
  {
    font-size: 0.75em !important;
  }
  .ms-drop ul > li label
  {
    font-size: 0.75em !important;
  }
  </style>

<script type="text/javascript">
    $(document).ready(function() {
      $("#year-para").hide();
      $(".dropdown-box-container").click(function() {
        $(".filter-dropdown-container").slideToggle();
      })
      window.testSelAll2 = $('.testSelAll2').SumoSelect({selectAll:false });
    })

        $(document).ready(function () {
            $(".textboxdomain").show();
            $(".textboxgroup").hide();
            $(".textboxcompany").hide();
            $(".textboxdivision").hide();
            $(".textboxbranch").hide();
            $(".textboxbusiness").hide();

            $("#radio1").click(function () {
               // $(".textboxdomain").show();
                $(".textboxgroup").hide();
                $(".textboxcompany").hide();
                $(".textboxdivision").hide();
                $(".textboxbranch").hide();
                $(".textboxbusiness").hide();
               
            });
           $("#radio2").click(function () {
             // $(".textboxdomain").show();
                $(".textboxgroup").hide();
                $(".textboxcompany").show();
                $(".textboxdivision").hide();
                $(".textboxbranch").hide();
                $(".textboxbusiness").hide();
                 $("#entity-auto").show();
            });
           $("#radio3").click(function () {
             // $(".textboxdomain").show();
                $(".textboxgroup").hide();
                $(".textboxcompany").hide();
                $(".textboxdivision").show();
                $(".textboxbranch").hide();
                $(".textboxbusiness").hide();
                 $("#division-auto").show();
            });
           $("#radio4").click(function () {
             // $(".textboxdomain").show();
                $(".textboxgroup").hide();
                $(".textboxcompany").hide();
                $(".textboxdivision").hide();
                $(".textboxbranch").show();
                $(".textboxbusiness").hide();
             $("#unit-auto").show();
            });
           $("#radio5").click(function () {
             // $(".textboxdomain").show();
                $(".textboxgroup").hide();
                $(".textboxcompany").hide();
                $(".textboxdivision").hide();
                $(".textboxbranch").hide();
                $(".textboxbusiness").show();
                 $("#business-auto").show();
             loadEscalations();
            });
        });

    $(document).ready(function() {
      loadEscalations();
      $("#viewaspie").hide();

      $("#previous").click(function() {
          
       })

      $("#next").click(function() {
          
       })

      $("#viewaspie").click(function() {
           		loadEscalations();
       })

      $("#viewasbar").click(function() {
           		loadEscalationsBar();
       })

      $("#back").click(function() {
           		loadEscalations();
       })

      $("#go-le").click(function() {
              loadEscalations();
       })

      $("#go-d").click(function() {
              loadEscalations();
       })

      $("#go-u").click(function() {
              loadEscalations();
       })

      $("#radio1").click(function() {
              loadEscalations();
       })

      $("#radio2").click(function() {
              loadEscalations();
       })

      $("#radio3").click(function() {
              loadEscalations();
       })

      $("#radio4").click(function() {
              loadEscalations();
       })

       $('#domainradio').click(function() {
             if( $(".textboxdomain").is(":hidden") ) {
               $(".textboxdomain").show();
               $("#domainradio").prop('checked', true);
             }
             else
             {
               $(".textboxdomain").hide();
               $("#domainradio").prop('checked', false);
             }
             });
      $('#countryradio').click(function() {
          if( $(".textboxcountry").is(":hidden") ) {
            $(".textboxcountry").show();
            $("#countryradio").prop('checked', true);
          }
          else
          {
            $(".textboxcountry").hide();
            $("#countryradio").prop('checked', false);
          }
      });


      $(".esc-tab").click(function() {
        $("#year-para").hide();        
        $(".esc-tab").addClass("active")
        //$(".actwise-tab").removeClass("active")
        $(".ageing-tab").removeClass("active")
        $(".compliance-tab").removeClass("active")
        $(".task-status-tab").removeClass("active");
        $(".trend-tab").removeClass("active")
    		$(".usecom-tab").removeClass("active")
    		$(".graph-box").show();
    		$(".grid-table-dash").hide();
    		$(".grid-table-dash1").hide();
        $("#level-filter").fadeIn();
        $("#viewaspie").hide();
        $("#unit-auto").show();
        $("#entity-auto").show();
        $("#division-auto").show();
        loadEscalations();
      })
    })

    function loadDrillDownData(name){
    	$("#viewaspie").hide();
    	$("#viewasbar").hide();
      $("#next").hide();
      $("#previous").hide();
    	$("#back").show();

    	var img_name="";
    	var margin_style="";
      img_name = "/images/dash-list/escalations.png";
      name = $("#hidden").val();
    
    	var htmlstr = '<div style="'+margin_style+'"><h2 style="margin-left:10px;font-size:20px">'+name+' for the year 2012</h2><br><img src='+img_name+' style="margin-left:3px;" ></div>';
       $(function () {
        $('#container').html(htmlstr);
    });
    }

    function loadEscalations(){
    	$("#viewasbar").hide();
    	$("#viewaspie").hide();
    	$("#back").hide();
        $("#previous").hide();
    	$("#next").hide();
      
        $(function () {
        		var not_complied = 0;
        		var drill="";
        		var delayed= 0;
        		var title = "";
            var total=0;
            var data1=[5, 1, 3, 6, 7,];
            var data2=[0, 0, 1, 1, 2, ];
        		if($('#radio4').is(':checked')){
                colors:['#FF7700','#D10018'],
                not_complied = 3;
                drill = "unitesc";
                delayed = 10;
                title = "Branch Office - 1";
                total = 28;
                data1= [8, 8, 4, 1, 9,];
                data2=[0, 1, 0, 2, 1, ];
	            }else if($('#radio3').is(':checked')){
	                color= ['#FFA500','#FF0000' ,'#FFC0CB', '#00FF00','#008000' ];
	                not_complied = 4;
	                drill = "divisionesc";
	                delayed = 5;
                        total = 29;
	                title = "Manufacturing division";
                        data1= [9, 6, 9, 10, 2,];
                        data2= [0, 0, 1, 2, 1, ];
	            }else if($('#radio2').is(':checked')){
	                color= ['#008000', '#FFA500', '#FF0000', '#FFC0CB', '#00FF00'];
	                not_complied = 6;
	                drill = "entityesc";
	                delayed = 10;
                        total = 50;
	                title = "KG";
                        data1= [3, 9, 5, 8, 8,];
                        data2= [0, 2, 1, 3, 1, ];
	            }else if($('#radio1').is(':checked')){
	               color= [Highcharts.getOptions().colors[2],Highcharts.getOptions().colors[5] ,'#FFC0CB', '#00FF00','#008000' ]; 
	               not_complied = 8;
	               drill = "groupesc";
	               delayed = 10;
                       total = 48;
	               title = "KG Groups";
                       data1=[9, 5, 9, 8, 4,];
                       data2=[0, 1, 2, 3, 1, ];
	            }
              else if($('#radio5').is(':checked')){
                
                 title = "KG";
                
              }
              $('#container').highcharts({
                  colors:['#F58835','#F32D2B',],
                    chart: {
                        type: 'column'
                    },
                    title: {
                        text: 'Escalations of '+title
                    },
                    subtitle: {
                        text: ''
                    },
                    xAxis: {
                        categories: [
                            '2011',
                            '2012',
                            '2013',
                            '2014',
                            '2015',
                        ],
                        crosshair: true,
                        labels: {
                              useHTML: true,
                              formatter: function() {
                                  var name=this.value;
                                  if($('#radio1').is(':checked')){
                                  if(name == "2012"){
                                    $("#hidden").val("Escalations of "+title);
                                    var link = '<a href="#"  id="'+name+'" onclick=loadDrillDownData()>'+
                                        name +'</a>'
                                    return link;
                                  }else{
                                    var link = '<span  id="'+name+'" >'+
                                        name +'</span>'
                                    return link;
                                  }}else{
                                    var link = '<span  id="'+name+'" >'+
                                        name +'</span>'
                                    return link;
                                  }
                             }
                          },

                    },
                    yAxis: {
                        min: 0,
                        title: {
                            text: 'Total Compliances'
                        },
                        allowDecimals: false
                    },
                    tooltip: {
                        headerFormat: '<span style="font-size:10px">{point.key}</span><table>',
                        pointFormat: '<tr><td style="padding:0">{series.name}: </td>' +
                            '<td style="padding:0"><b>{point.y:.0f}</b></td></tr>',
                        footerFormat: '</table>',
                        shared: true,
                        useHTML: true
                    },
                    plotOptions: {
                        column: {
                            pointPadding: 0,
                            groupPadding: 0.3,
                            borderWidth: 0,
                            dataLabels: {
                            enabled: true,
                            textShadow:null,
                            // format:'{point.percentage:.0f}%'
                            format:'{point.y}'
                            },
                          point: {
                            events: {
                                click: function() {
                                    var drilldown = this.drilldown;
                                    if (drilldown) { 
                                            loadDrillDownData(drilldown);
                                    }
                                }
                              }
                            }
                        }
                    },
                    series: [{
                        name: 'Delayed Compliance',
                        data: data1,
                    }, {
                        name: 'Not Complied',
                        data: data2,
                    }]
                });

          });
    }


  </script> 

<div class="content-container" >
  <div class="content-area">
    <div class="archive-container" style="width:100%;margin-bottom: 40px;">
      <div class="archive-header"> 
        <span class="task-status-tab" id="task" style="padding-left:8px;padding-right:8px"><a href="/home" style="text-decoration:none;color:white">Compliance Status</a></span>
        <span class="esc-tab active" id="esc" style="padding-left:8px;padding-right:8px"><a href="/home_escalations" style="text-decoration:none;color:white">Escalations</a></span> 
        <span class="ageing-tab " id="age"><a href="/home_ageingwise" style="text-decoration:none;color:white">Not Complied</a></span> 
        <span class="usecom-tab" id="usecom"><a href="/home_userwise" style="text-decoration:none;color:white">Assignee wise Compliances</a></span> 
        <span class="trend-tab" id="trend"><a href="/home_trend" style="text-decoration:none;color:white">Trend Chart</a></span> 
        <span class="compliance-tab" id="comp"><a href="/home_risk" style="text-decoration:none;color:white">Compliance Applicability Status</a></span> 
        </div>


      <div id="level-filter" style="width:100%">
        <input type="hidden" id="hidden"/>
        <div align="center" style="border:1px solid #fff;">
        <table class="filtertable">
            <tr>
            <td colspan="5" align="center">
            <table width="100%" ><tr>
            <td>
              <div style="padding-top:39px;MARGIN-LEFT: 44PX;"> <span>Filter By:</span> </div>
            </td>
            <td>
            <div style="position:relative;  width: 80px;margin-left: -89px;">
              <input type="radio" name="countryradio" id="countryradio" class="radio" checked/>
              <label for="countryradio" id="radiolabel"  style="width:120px">Country</label>
              <div class="textboxcountry">
                <p id="country-para1" style="margin-top:5px;float:left;width:120px">
                  <select id="country" multiple="multiple" placeholder="Select Business" onchange="console.log($(this).children(':selected').length)" class="testSelAll2 input-box sumo1" style="width:120px">
                    <option value="selectall" >Select All</option> 
                    <option value="Industrial Law" selected>China</option>
                    <option value="Finance" selected>India</option>
                    <option value="Industrial Law" selected>Malaysia</option>
                    <option value="Industrial Law" selected>Singapore</option>
                    <option value="Labour Law" selected>US</option>
                  </select>
                  <span><a href="#">
                <input id="go-co" type="button" class="btn" value="Go" style="float:right;margin-top:0px;margin-right:-33px"/>
                </a></span> 
                </p>
               
                </div>
            </div>
          </td>
          <td>
           <div style="position:relative;  width: 77px;margin-left: 79px;">
              <input type="radio" name="" id="domainradio" class="radio"  checked />
              <label for="domainradio" id="radiolabel"  style="width:90px">Domain</label>
              <div class="textboxdomain">
                <p id="business-para1" style="margin-top:5px;float:left;width:120px">
                  <select id="business" multiple="multiple" placeholder="Select Business" onchange="console.log($(this).children(':selected').length)" class="testSelAll2 input-box sumo1" style="width:120px">
                    <option value="selectall" >Select All</option> 
                    <option value="Industrial Law" selected>Finance</option>
                    <option value="Finance" selected>Labour Law</option>
                    <option value="Industrial Law" selected>Industrial Law</option>
                  </select>
                  <span><a href="#">
                <input id="go-bu" type="button" class="btn" value="Go" style="float:right;margin-top:0px;margin-right:-33px"/>
                </a></span> 
                </p>
               
                </div>
            </div>
            </td>
          </tr>
        </table>
      </td>
    </tr>
  </table>
  <table class="filtertable">
        <tr>
          <td>
            <div style="float:left;position:relative;width:100px">
              <input type="radio" name="radio" id="radio1" class="radio" checked/>
              <label for="radio1" id="radiolabel"  style="width:90px">Group</label>
              <div class="textboxgroup">
                <p>
                  <input type="text" name="text1" id="text1" autofocus class="input-box icon-autocomplete margin10">
                </p>
              </div>
            </div>
          </td>
          <td>
            <div style="position:relative;width:132px">
              <input type="radio" name="radio" id="radio5" class="radio"/>
              <label for="radio5" id="radiolabel"  style="width:120px">Business Group</label>
              <div class="textboxbusiness">
                <input type="text" name="text2" id="business-auto" value="KG" autofocus class="input-box icon-autocomplete" style="width:110px;margin-top:4px;">
                <span>
                  <a href="#">
                    <input id="go-bu" type="button" class="btn" value="Go" style="float:right;  margin-top: 6px;margin-right: -11px;"/>
                  </a>
                </span>
              </div>
            </div>
          </td>
          <td>
            <div style="position:relative;width:124px">
              <input type="radio" name="radio" id="radio2" class="radio"/>
              <label for="radio2" id="radiolabel"  style="width:110px">Legal Entity</label>
              <div class="textboxcompany">
                <p id="entity-para1" style="margin-top:5px;float:left;width:110px">
                   <input type="text" name="text2" id="entity-auto" value="KG" autofocus class="input-box icon-autocomplete" style="width:120px;margin-top:4px;">
                    <span>
                      <a href="#">
                        <input id="go-le" type="button" class="btn" value="Go" style="float:right;      margin-top: -25px;margin-right: -46px"/>
                      </a>
                    </span>
                </p>
              </div>
            </div>
          </td>
          <td>
            <div style="float:left;position:relative;width:101px">
              <input type="radio" name="radio" id="radio3" class="radio"/>
              <label for="radio3" id="radiolabel"  style="width:90px">Division</label>
              <div class="textboxdivision">
                <input type="text" name="text4" id="unit-auto" autofocus value="KG Manufacturing Division"  class="input-box icon-autocomplete" style="width:120px;margin-top:10px">
                <span>
                  <a href="#">
                    <input id="go-d" type="button" class="btn" value="Go" style="float:right;  margin-top: -25px;margin-right: -52px;"/>
                  </a>
                </span> 
                </div>
            </div>
          </td>
          <td>
            <div style="float: left; position: relative; width: 120px;">
              <input type="radio" name="radio" id="radio4" class="radio"/>
              <label for="radio4" id="radiolabel" style="width:80px">Unit</label>
              <div class="textboxbranch">
                <input type="text" class="input-box icon-autocomplete" value="Branch Office - 1" style="width:80px;  margin-top: 5px;">
                <span>
                  <a href="#">
                    <input id="go-u" type="button" class="btn" value="Go" style="float:right;margin-right: 6px; margin-top: 6px;"/>
                  </a>
                </span>
               </div>
            </div>
          </td>
        </tr>
      </table>
    </div>
  </div>


      <div class="clearfix" ></div><br>
      <div class="graph-box">
        <input type="button" id="viewaspie" style="float:right;margin-right:20px" value="View as pie chart"/>
        <input type="button" id="viewasbar" style="float:right;margin-right:20px" value="View as bar chart"/>
        <input type="button" id="back" onClick="loadGroup()" style="float:right;margin-right:20px" value="Back"/>
        <p id="year-para" style="margin-top:5px;float:right;width:130px">
          <span style="font-size:13px">Select Year:</span><select id="year" multiple="multiple" placeholder="Select Years" onchange="console.log($(this).children(':selected').length)" class="testSelAll2 input-box sumo2" style="width:110px;float:right;" >
            <option value="2009" >2009</option>
            <option value="2010" >2010</option>
            <option value="2011" >2011</option>
            <option value="2012" >2012</option>
            <option value="2013" selected>2013</option>
            <option value="2014" selected>2014</option>
            <option value="2015" selected>2015</option>
          </select>
        </p>
        <div class="clearfix"></div>
        <div id="container" style="height: auto;"></div>
        <input type="button" id="previous" style="float:left;margin-left:20px" value="<< Previous"/>
        <input type="button" id="next" style="float:right;margin-right:20px" value="Next >>"/>
      </div>
    </div>
  </div>
</div>

<script src="/js/multiselect/jquery.multiple.select.js"></script>
<script>
  $('.textboxbranch').find('select').multipleSelect({
            filter: true,
            multiple: true
        });
</script>
<script>

$(function(){
  $('#text2').autoComplete({
      minChars: 1,
      source: function(term, suggest){
          term = term.toLowerCase();
          var choices = ['Bajaj Allianz Group', 'PRG Group', 'TVS Group'];
          var suggestions = [];
          for (i=0;i<choices.length;i++)
              if (~choices[i].toLowerCase().indexOf(term)) suggestions.push(choices[i]);
          suggest(suggestions);
      }
  });
  $('#text3').autoComplete({
      minChars: 1,
      source: function(term, suggest){
          term = term.toLowerCase();
          var choices = ['Auto Parts - Manufacturing', 'Division 1', 'Division 2'];
          var suggestions = [];
          for (i=0;i<choices.length;i++)
              if (~choices[i].toLowerCase().indexOf(term)) suggestions.push(choices[i]);
          suggest(suggestions);
      }
  });
  $('#text4').autoComplete({
      minChars: 1,
      source: function(term, suggest){
          term = term.toLowerCase();
          var choices = ['South Gate, Madurai', 'Periyar, Madurai', 'Mattuthavani, Madurai'];
          var suggestions = [];
          for (i=0;i<choices.length;i++)
              if (~choices[i].toLowerCase().indexOf(term)) suggestions.push(choices[i]);
          suggest(suggestions);
      }
  });
   
});
</script> 
{% endblock %} 
