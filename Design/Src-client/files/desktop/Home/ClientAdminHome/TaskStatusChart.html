{% extends "files/desktop/Header/Header.html" %}
{% block content %}

<link rel="stylesheet" type="text/css" href="/css/dashboard.css">
<link rel="stylesheet" type="text/css" href="/css/multiselect/multiple-select.css">
<style>
abbr
{
    border-bottom: 1px dotted #666;
    cursor: help;
}

.btn {
  background: #662d91;
  background-image: -webkit-linear-gradient(top, #662d91, #662d91);
  background-image: -moz-linear-gradient(top, #662d91, #662d91);
  background-image: -ms-linear-gradient(top, #662d91, #662d91);
  background-image: -o-linear-gradient(top, #662d91, #662d91);
  background-image: linear-gradient(to bottom, #662d91, #662d91);
  -webkit-border-radius: 7;
  -moz-border-radius: 7;
  border-radius: 7px;
  font-family: Arial;
  font-style:bold;
  color: #ffffff;
  font-size: 8px;
  padding: 7px 9px 7px 9px;
  text-decoration: none;
  border-width:0px;

}

.btn:hover {
  background: #C293E6;
  background-image: -webkit-linear-gradient(top, #C293E6, #c4c4c4);
  background-image: -moz-linear-gradient(top, #C293E6, #c4c4c4);
  background-image: -ms-linear-gradient(top, #C293E6, #c4c4c4);
  background-image: -o-linear-gradient(top, #C293E6, #c4c4c4);
  background-image: linear-gradient(to bottom, #C293E6, #c4c4c4);
  text-decoration: none;
  cursor:hand;
}

.tooltip
{
    position:absolute;
    background-color:#eeeefe;
    border: 1px solid #aaaaca;
    font-size: smaller;
    padding:4px;
    width: 160px;
    box-shadow: 1px 1px 1px rgba(0, 0, 0, 0.1);
    -moz-box-shadow: 1px 1px 1px rgba(0, 0, 0, 0.1);
    -webkit-box-shadow: 1px 1px 1px rgba(0, 0, 0, 0.1); 
}

#radiolabel {
  width: 70px;
  border-radius: 3px;
  border: 1px solid #D1D3D4;
  font-size: 11px;
  height:2.4em;
}

/* hide input */
input.radio:empty {
    margin-left: -1200px;
}

/* style label */
input.radio:empty ~ label {
    position: relative; 
    float: left;
    line-height: 2.3em; 
    text-indent: 3.25em;
    margin-top: 2em;
    cursor: pointer;
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
}

input.radio:empty ~ label:before {
    position: absolute;
    display: block;
    top: 0;
    bottom: 0;
    left: 0;
    content: '';
    width: 2.5em;
    background: #D1D3D4;
    border-radius: 3px 0 0 3px;
}

/* toggle hover */
input.radio:hover:not(:checked) ~ label:before {
    content:'\2714';
    text-indent: .9em;
    color: #ffffff;
}

input.radio:hover:not(:checked) ~ label {
    color: #888;
}

/* toggle on */
input.radio:checked ~ label:before {
    content:'\2714';
    text-indent: .9em;
    color: #ffffff;
    background-color: #662d91;
}

input.radio:checked ~ label {
    color: #777;
}
.leftmargin 
{
  float: left;
  position: relative;
  width: 160px;
}
.margin10
{
  margin-top: 10px;
}
#cssmenu > ul > li:hover > ul {
  top: 46.5px !important;
}

.ms-drop ul > li label.optgroup {
  font-size: 0.75em;
  }
  .optgroup 
  {
    font-size: 0.75em !important;
  }
  .ms-drop ul > li label
  {
    font-size: 0.75em !important;
  }

  </style>
 
<script type="text/javascript">
    $(document).ready(function() {
      $("#radio6").prop('checked', true);
       $("#domainradio").prop('checked', true);
      $("#year-para").hide();
      $(".dropdown-box-container").click(function() {
        $(".filter-dropdown-container").slideToggle();
      })
      window.testSelAll2 = $('.testSelAll2').SumoSelect({selectAll:false });
      $("#entity-auto").hide();
      $("#division-auto").hide();
      $("#unit-auto").hide();
    })

        $(document).ready(function () {
            $(".textboxdomain").show();
            $(".textboxgroup").hide();
            $(".textboxcompany").hide();
            $(".textboxdivision").hide();
            $(".textboxbranch").hide();
            $(".textboxbusiness").hide();
            $(".textboxdate").show();
            $("#previousyear").show();
            $("#nextyear").show();

            $("#radio1").click(function () {
               //$(".textboxdomain").show();
                $(".textboxgroup").hide();
                $(".textboxcompany").hide();
                $(".textboxdivision").hide();
                $(".textboxbranch").hide();
                $(".textboxbusiness").hide();
              //  $(".textboxdate").show();
                $("#previousyear").show();
                $("#nextyear").show();
               // $("#radio6").prop('checked', true);
            });
           $("#radio2").click(function () {
             //$(".textboxdomain").show();
                $(".textboxgroup").hide();
                $(".textboxcompany").show();
                $(".textboxdivision").hide();
                $(".textboxbranch").hide();
                $(".textboxbusiness").hide();
               // $(".textboxdate").show();
                $("#previousyear").show();
                $("#nextyear").show();
               // $("#radio6").prop('checked', true);
            });
           $("#radio3").click(function () {
            // $(".textboxdomain").show();
                $(".textboxgroup").hide();
                $(".textboxcompany").hide();
                $(".textboxdivision").show();
                $(".textboxbranch").hide();
                $(".textboxbusiness").hide();
              //  $(".textboxdate").show();
                $("#previousyear").show();
                $("#nextyear").show();
              //  $("#radio6").prop('checked', true);
            });
           $("#radio4").click(function () {
           //  $(".textboxdomain").show();
                $(".textboxgroup").hide();
              //  $(".textboxdate").show();
                $(".textboxcompany").hide();
                $(".textboxdivision").hide();
                $(".textboxbranch").show();
                $(".textboxbusiness").hide();
                $("#previousyear").show();
                $("#nextyear").show();
                $("#radio6").prop('checked', true);
            });
           $("#radio5").click(function () {
             //$(".textboxdomain").show();
                $(".textboxgroup").hide();
                $(".textboxcompany").hide();
                $(".textboxdivision").hide();
                $(".textboxbranch").hide();
                $(".textboxbusiness").show();
              //  $(".textboxdate").show();
                $("#previousyear").show();
                $("#nextyear").show();
              //  $("#radio6").prop('checked', true);
            });
           // $("#radio6").click(function () {
           //    $(".textboxdomain").show();
           //    $(".textboxdate").show();
           //    $("#previousyear").hide();
           //    $("#nextyear").hide();
           //  });
          $('#radio6').click(function() {
             if( $(".textboxdate").is(":hidden") ) {
              $(".textboxdate").show();
               $("#radio6").prop('checked', true);
             }
             else
             {
              $(".textboxdate").hide();
               $("#radio6").prop('checked', false);
             }
             });
           $('#domainradio').click(function() {
             if( $(".textboxdomain").is(":hidden") ) {
               $(".textboxdomain").show();
               $("#domainradio").prop('checked', true);
             }
             else
             {
               $(".textboxdomain").hide();
               $("#domainradio").prop('checked', false);
             }
             });



        });

    $(document).ready(function() {
      loadGroup();
      $("#viewaspie").hide();

      $("#previous").click(function() {
            if($("#radio1").is(':checked')){
            }else if($("#radio2").is(':checked')){
              loadCompany();
            }else if($("#radio3").is(':checked')){
              loadDivision();
            }else if($("#radio4").is(':checked')){
              loadUnit();
            }
       })

      $("#next").click(function() {
            if($("#radio1").is(':checked')){

            }else if($("#radio2").is(':checked')){
              loadCompanyNext();
            }else if($("#radio3").is(':checked')){
              loadDivisionNext();
            }else if($("#radio4").is(':checked')){
              loadUnitNext();
            }
       })

      $("#previousyear").click(function() {
            if($("#radio1").is(':checked')){
              loadGroup();
            }else if($("#radio2").is(':checked')){
              loadCompany();
            }else if($("#radio3").is(':checked')){
              loadDivision();
            }else if($("#radio4").is(':checked')){
              loadUnit();
            }else if($("#radio5").is(':checked')){
              loadBusinessGroup();
            }
       })

      $("#nextyear").click(function() {
            if($("#radio1").is(':checked')){
              loadGroup();
            }else if($("#radio2").is(':checked')){
              loadCompany();
            }else if($("#radio3").is(':checked')){
              loadDivision();
            }else if($("#radio4").is(':checked')){
              loadUnit();
            }else if($("#radio5").is(':checked')){
              loadBusinessGroup();
            }
       })

      $("#viewaspie").click(function() {
              if($("#radio1").is(':checked')){
      				loadCountrySpecific();
      			}else if($("#radio2").is(':checked')){
      				loadCompanySingleSelectionPie();
      			}else if($("#radio3").is(':checked')){
      				loadCompanySingleSelectionPie();
      			}else if($("#radio4").is(':checked')){
      				loadCompanySingleSelectionPie();
      			}
       })

      $("#viewasbar").click(function() {
              if($("#radio1").is(':checked')){
      				loadCountrySpecificBar();
      			}else if($("#radio2").is(':checked')){
      				loadCompanySingleSelection($("#hidden").val());
      			}else if($("#radio3").is(':checked')){
      				loadCompanySingleSelection($("#hidden").val());
      			}else if($("#radio4").is(':checked')){
      				loadCompanySingleSelection($("#hidden").val());
      			}
           
       })

      $("#back").click(function() {
              $("#next").show();
              $("#previous").show();
           		if($("#radio1").is(':checked')){
                  var value = $("#hidden").val();
                  if(value == "singlepie"){
                    loadCountrySpecific();
                  }else if(value == "singlebar"){
                    loadCountrySpecificBar();
                  }else{
          				  loadGroup();
                  }
          			}else if($("#radio2").is(':checked')){
          				loadCompany();
          			}else if($("#radio3").is(':checked')){
          				loadDivision();
          			}else if($("#radio4").is(':checked')){
          				loadUnit();
          			}
       })

      $("#go-le").click(function() {
              loadCompany();
       })

      $("#go-d").click(function() {
              loadDivision();
       })

      $("#go-u").click(function() {
              loadUnit();
       })

      $("#go-date").click(function() {
              if($("#radio1").is(':checked')){
                  loadGroup();
                }else if($("#radio2").is(':checked')){
                  loadCompany();
                }else if($("#radio3").is(':checked')){
                  loadDivision();
                }else if($("#radio4").is(':checked')){
                  loadUnit();
                }
       })

      $("#radio1").click(function() {
              loadGroup();
       })

      $("#radio2").click(function() {
              loadCompany();
       })

      $("#radio3").click(function() {
              loadDivision();
       })

      $("#radio4").click(function() {
              loadUnit();
       })

      $("#radio5").click(function() {
              loadBusinessGroup();
       })

      $(".task-status-tab").click(function() {
        $("#year-para").hide();
      	$(".task-status-tab").addClass("active")
        //$(".actwise-tab").removeClass("active")
        $(".ageing-tab").removeClass("active")
        $(".compliance-tab").removeClass("active")
        $(".esc-tab").removeClass("active")
    		$(".usecom-tab").removeClass("active")
        $(".trend-tab").removeClass("active")
    		$(".graph-box").show();
    		$(".grid-table-dash").hide();
    		$(".grid-table-dash1").hide();
        $("#level-filter").fadeIn();
        $("#viewaspie").hide();
        $("#unit-auto").hide();
        $("#entity-auto").hide();
        $("#division-auto").hide();
        $(".SumoSelect").show();
        $("#next").show();
        $("#previous").show();
        loadGroup();
      })
    })

    function loadCompanySingleSelectionPie(){
    	$("#viewaspie").hide();
    	$("#viewasbar").show();
      $("#container").show();
      $("#imgcontainer").hide();
    	var name = $("#hidden").val();
    	$(function () {
            $('#container').highcharts({
       
       colors:['#A5D17A','#F58835','#F0F468','#F32D2B'],
        chart: {
            type: 'pie',
            options3d: {
                enabled: true,
                alpha: 45,
                beta: 0
            }
        },
        title: {
            text: name
        },
        tooltip: {
            pointFormat: '{series.name}: <b>{point.y}</b> <br>Total Compliances: 70'
        },
        plotOptions: {
            pie: {
                allowPointSelect: true,
                cursor: 'pointer',
                depth: 35,
                dataLabels: {
                    enabled: true,
                    format: '{point.percentage:.0f}%'
                },
                showInLegend: true,
                point: {
                        events: {
                            click: function() {
                                var drilldown = this.drilldown;
                                $("#hidden").val("singlepie");
                                if (drilldown) { 
                                  loadDrillDownData(drilldown);
                                }
                            }
                          }
                        }
            }
        },
        series: [{
            type: 'pie',
                    name: 'Compliance',
                    data: [
                      {
                        name:"Complied",
                        y:15,
                        drilldown:"Complied"
                      },{
                        name:"Delayed compliance",
                        y:15,
                        drilldown:"Delayed"
                      },{
                        name:"In progress",
                        y:18,
                        drilldown:"Inprogress"
                      },{
                        name:"Not complied",
                        y:22,
                        drilldown:"NotComplied"
                      },
                    ]
        }]
    });
        });
    }

    function loadCompanySingleSelection(name){
    	$(function () {
    		$("#viewaspie").show();
    		$("#viewasbar").hide();
    		$("#hidden").val(name);
        $("#container").show();
        $("#imgcontainer").hide();
		    $('#container').highcharts({
		    // colors:['#239e13','#a3d202','#faf216','#e70808'],
            colors:['#A5D17A','#F58835','#F0F468','#F32D2B',],
		        chart: {
		            type: 'column'
		        },
		        title: {
		            text: name
		        },
		        xAxis: {
		            type: 'category',
                title: {
                    text: 'Compliance Status'
                },
		        },
		        yAxis: {
		            title: {
		                text: 'Total Compliances'
		            }

		        },
		        legend: {
		            enabled: false
		        },
		        plotOptions: {
		        	column:{
                dataLabels: {
                        enabled: true,
                        style: {
                           textShadow:null,
                        },
                        /*format:'{point.percentage:.0f}%'*/
                        format:'{point.y}'
                    },
		        		point: {
                        events: {
                            click: function() {
                                var drilldown = this.drilldown;
                                $("#hidden").val("singlebar");
                                if (drilldown) {
                                 loadDrillDownData(drilldown); 
                                }
                            }
                          }
                        }
		        	},
		            series: {
		                borderWidth: 0,
		                dataLabels: {
		                    enabled: true,
							
							formatter:function() {
							var dataSum = (5 + 2 + 8 + 3);
							var pcnt = (this.y / dataSum) * 100;
							return Highcharts.numberFormat(pcnt,0) + '%';
						}
		                    /*format: '{point.y:.0f}'*/
		                }
		            }
		        },

		        tooltip: {
                            headerFormat: '<b>{series.name}</b>:{point.percentage:.0f}%<br/>',
                            pointFormat: 'Total Compliances: 18'
		        },

		        series: [{
		            name: "Compliance - Group wise",
		            colorByPoint: true,
		            data: [{
		                name: "Complied",
		                y: 5,
		                drilldown:"Complied"
		            }, {
		                name: "Delayed compliance",
		                y: 2,
		                drilldown:"Delayed"
		            }, {
		                name: "In progress",
		                y: 8,
		                drilldown: "Inprogress"
		            }, {
		                name: "Not complied",
		                y: 3,
		                drilldown:"NotComplied"
		            }]
		        }],
		    });
		});
    }

    function loadCompanyNext(){
      $("#previous").show();
      $("#next").show();
      $("#container").show();
      $("#imgcontainer").hide();
      $(function () {  
        var inprogress_data = [10];
        var pending_data = [10];
        var completed_data = [10];
        var not_complied = [10];
              inprogress_data[0] = {name: 'KG Hospitals',y: 20,drilldown:"Inprogress"};
              pending_data[0] = {name: 'KG Hospitals',y: 20,drilldown:"Delayed"};
              completed_data[0] = {id:'fin',name: 'KG Hospitals',y: 10,drilldown:"Complied"};
              not_complied[0] = {name: 'KG Hospitals',y: 30,drilldown:"NotComplied"};

              inprogress_data[1] = {name: 'KG Bakeries',y: 12,};
              pending_data[1] = {name: 'KG Bakeries',y: 18,};
              completed_data[1] = {id:'fin',name: 'KG Bakeries',y: 27};
              not_complied[1] = {name:"KG Bakeries", y:13}

              inprogress_data[2] = {name: 'KG Hotels',y: 15};
              pending_data[2] = {name: 'KG Hotels',y: 25};
              completed_data[2] = {id:'fin',name: 'KG Hotels',y: 10};
              not_complied[2] = {name:"KG Hotels", y:10}
            
              inprogress_data[3] = {name: 'KG Schools',y: 10};
              pending_data[3] = {name: 'KG Schools',y: 24};
              completed_data[3] = {id:'fin',name: 'KG Schools',y: 24};
              not_complied[3] = {name:"KG Schools", y:17}
            
              inprogress_data[4] = {name: 'KG University',y: 24};
              pending_data[4] = {name: 'KG University',y: 23};
              completed_data[4] = {id:'fin',name: 'KG University',y: 31};
              not_complied[4] = {name:"KG Mobiles", y:13}
         

      $('#container').highcharts({
            // colors:['#239e13','#a3d202','#faf216','#e70808'],
            //colors:['#125900','#FF7700','#FFDA0F','#D10018'],
			colors:['#A5D17A','#F58835','#F0F468','#F32D2B',],
            chart: {
                type: 'bar',
                width:'850',
               
            },
            title: {
                text: 'Legal entity wise compliances'
            },
            xAxis: {
                categories: ['KG Hospitals','KG Bakeries','KG Hotels','KG Schools','KG University'],
                title: {
                    text: 'Legal entities'
                },
                labels: {
                              useHTML: true,
                              formatter: function() {
                                  var name=this.value;
                                  if(name == "KG Autoparts"){
                                    $("#hidden").val("KG Autoparts");
                                    var link = '<a href="#"  id="'+name+'" onclick=loadCompanySingleSelectionPie(this.id)>'+
                                        name +'</a>'
                                    return link;
                                  }else{
                                    var link = '<span  id="'+name+'" >'+
                                        name +'</span>'
                                    return link;
                                  }
                             }
                          },
            },
            yAxis: {
                min: 0,
                title: {
                    text: 'Total Compliances'
                }
            },
            legend: {
                reversed: true
            },
            tooltip: {
              headerFormat: '<b>{point.x}</b><br/>',
              pointFormat: '{series.name}: {point.percentage:.0f}%<br>Total Compliances: {point.stackTotal}'
            },
            plotOptions: {
                series: {
                    stacking: 'normal',
                    dataLabels: {
                        enabled: true,
                        color:  '#000000',
                        style: {
                            /*textShadow: '0 0 3px black',*/
                            textShadow:null,
                        },
                        // format:'{point.percentage:.0f}%'
                        format:'{point.y}'
                    },
                    point: {
                                events: {
                                    click: function() {
                                        var drilldown = this.drilldown;
                                        if (drilldown) {
                                        loadDrillDownData(drilldown); 
                                        }
                                    }
                                  }
                                }
                },
            },
            series: [{
                    name: 'Complied',
                    data : completed_data
                }, {
                    name: 'Delayed compliance',
                        data : pending_data
                }, {
                    name: 'In progress',
                         data : inprogress_data
                }, {
                    name: 'Not complied',
                        data : not_complied
                }]
        });
      });
    }

    function loadCompany(){
      $("#previous").show();
      $("#next").show();
      $("#container").show();
      $("#imgcontainer").hide();
    	$(function () {  
    	  var inprogress_data = [10];
    	  var pending_data = [10];
    	  var completed_data = [10];
    	  var not_complied = [10];
    	  var values = $("#legal-entity").val();
    	  if(values.length > 1){
	    	  for(var i=0;i<7;i++){
	    	  	if (values[i] ==  "KG Transports"){
	    	  		inprogress_data[i] = {name: 'KG Transports',y: 24,drilldown:"EntityInprogress"};
	    	  		pending_data[i] = {name: 'KG Transports',y: 13,drilldown:"Delayed"};
	    	  		completed_data[i] = {id:'fin',name: 'KG Transports',y: 18,drilldown:"EntityComplied"};
	    	  		not_complied[i] = {name: 'KG Transports',y: 22,drilldown:"NotComplied"};
	    	  	}else if(values[i] ==  "KG Autoparts"){
	    	  		inprogress_data[i] = {name: 'KG Autoparts',y: 15,};
	    	  		pending_data[i] = {name: 'KG Autoparts',y: 23,};
	    	  		completed_data[i] = {id:'fin',name: 'KG Autoparts',y: 12};
	    	  		not_complied[i] = {name:"KG Autoparts", y:18};
	    	  	}else if(values[i] ==  "KG Booking"){
	    	  		inprogress_data[i] = {name: 'KG Booking',y: 23};
	    	  		pending_data[i] = {name: 'KG Booking',y: 22};
	    	  		completed_data[i] = {id:'fin',name: 'KG Booking',y: 19};
	    	  		not_complied[i] = {name:"KG Booking", y:21};
	    	  	}else if(values[i] ==  "KG Electricals"){
	    	  		inprogress_data[i] = {name: 'KG Electricals',y: 23};
	    	  		pending_data[i] = {name: 'KG Electricals',y: 10};
	    	  		completed_data[i] = {id:'fin',name: 'KG Electricals',y: 18};
	    	  		not_complied[i] = {name:"KG Electricals", y:22};
	    	  	}else if(values[i] ==  "KG Mobiles"){
	    	  		inprogress_data[i] = {name: 'KG Mobiles',y: 24};
	    	  		pending_data[i] = {name: 'KG Mobiles',y: 24};
	    	  		completed_data[i] = {id:'fin',name: 'KG Mobiles',y: 13};
	    	  		not_complied[i] = {name:"KG Mobiles", y:21}
	    	  	}else if(values[i] ==  "KG HealthCare"){
				  inprogress_data[i] = {name: 'KG HealthCare',y: 20};
				  pending_data[i] = {name: 'KG HealthCare',y: 25};
				  completed_data[i] = {id:'fin',name: 'KG HealthCare',y: 22};
				  not_complied[i] = {name:"KG HealthCare", y:18};
				}else if(values[i] ==  "KG HR Services"){
				  inprogress_data[i] = {name: 'KG HR Services',y: 22};
				  pending_data[i] = {name: 'KG HR Services',y: 18};
				  completed_data[i] = {id:'fin',name: 'KG HR Services',y: 22};
				  not_complied[i] = {name:"KG HR Services", y:23}
				}
				else {
					continue;
					}
	    	  }
			  
	      }else if(values.length <=0){
	      	alert("Select atleast one legal entity to load chart");
	      }else{
	      	loadCompanySingleSelection(values[0]);
	      }

      $('#container').highcharts({
            // colors:['#239e13','#a3d202','#faf216','#e70808'],
            //colors:['#125900','#FF7700','#FFDA0F','#D10018'],
			colors:['#F32D2B','#F0F468','#F58835','#A5D17A',],
            chart: {
                type: 'bar',
                width:'850',
                
            },
            title: {
                text: 'Legal entity wise compliances'
            },
            xAxis: {
                categories: ['KG Transports', 'KG Autoparts', 'KG Booking', 'KG Electricals', 'KG Mobiles', 'KG HR Services', 'KG HealthCare'],
                endOnTick: true,
                title: {
                    text: 'Legal entities'
                },
                labels: {
                              useHTML: true,
                              formatter: function() {
                                  var name=this.value;
                                  if(name == "KG Booking"){
                                    $("#hidden").val("KG Booking");
                                    var link = '<a href="#"  id="'+name+'" onclick=loadCompanySingleSelectionPie(this.id)>'+
                                        name +'</a>'
                                    return link;
                                  }else{
                                    var link = '<span  id="'+name+'" >'+
                                        name +'</span>'
                                    return link;
                                  }
                             }
                          },
            },
            yAxis: {
                min: 0,
                title: {
                    text: 'Total Compliances'
                },
                  endOnTick: true,
            },
            legend: {
                reversed: true
            },
            tooltip: {
              // headerFormat: '<b>{point.x}</b><br/>',
              // pointFormat: '{series.name}: {point.y} out of Total: {point.stackTotal}'
              headerFormat: '<b>{point.x}</b><br/>',
              pointFormat: '{series.name}: {point.percentage:.0f}%<br>Total Compliances: {point.stackTotal}'
            },
            plotOptions: {
                series: {
                    stacking: 'normal',
                    dataLabels: {
                        enabled: true,
                        color:  '#000000',
                        style: {
                            /*textShadow: '0 0 3px black',*/
                            textShadow:null,
                        },
                        // format:'{point.percentage:.0f}%'
                        format:'{point.y}'
                    },
                    point: {
                                events: {
                                    click: function() {
                                        var drilldown = this.drilldown;
                                        if (drilldown) {
                                        loadDrillDownData(drilldown); 
                                        }
                                    }
                                  }
                                }
                },
            },
            series: [{
                    name: 'Not complied',
                        data : not_complied
                }, {
                    name: 'In progress',
                         data : inprogress_data
                }, {
                    name: 'Delayed compliance',
                        data : pending_data
                }, {
                    name: 'Complied',
                    data : completed_data
                }]
        });
      });
    }

    function loadDivisionNext(){
      $("#previous").show();
      $("#next").show();
      $("#container").show();
      $("#imgcontainer").hide();
      $(function () {  
        var inprogress_data = [10];
        var pending_data = [10];
        var completed_data = [10];
        var not_complied = [10];
              inprogress_data[0] = {name: 'KG HR Unit',y: 30,drilldown:"Inprogress"};
              pending_data[0] = {name: 'KG HR Unit',y: 20,drilldown:"Delayed"};
              completed_data[0] = {id:'fin',name: 'KG HR Unit',y: 10,drilldown:"Complied"};
              not_complied[0] = {name: 'KG HR Unit',y: 20,drilldown:"NotComplied"};

              inprogress_data[1] = {name: 'KG Development',y: 21,};
              pending_data[1] = {name: 'KG Development',y: 29,};
              completed_data[1] = {id:'fin',name: 'KG Development',y: 16};
              not_complied[1] = {name:"KG Development", y:28}
         

      $('#container').highcharts({
            // colors:['#239e13','#a3d202','#faf216','#e70808'],
            //colors:['#125900','#FF7700','#FFDA0F','#D10018'],
			colors:['#F32D2B','#F0F468','#F58835','#A5D17A',],
            chart: {
                type: 'bar',
                width:'850',
              
            },
            title: {
                text: 'Division wise compliances'
            },
            xAxis: {
                categories: ['KG HR Unit','KG Development'],
                title: {
                    text: 'Division'
                },
                labels: {
                              useHTML: true,
                              formatter: function() {
                                  var name=this.value;
                                  if(name == "KG Security"){
                                    $("#hidden").val("KG Security");
                                    var link = '<a href="#"  id="'+name+'" onclick=loadCompanySingleSelectionPie(this.id)>'+
                                        name +'</a>'
                                    return link;
                                  }else{
                                    var link = '<span  id="'+name+'" >'+
                                        name +'</span>'
                                    return link;
                                  }
                             }
                          },
            },
            yAxis: {
                min: 0,
                title: {
                    text: 'Total Compliances'
                }
            },
            legend: {
                reversed: true
            },
            tooltip: {
              // headerFormat: '<b>{point.x}</b><br/>',
              // pointFormat: '{series.name}: {point.y} out of Total: {point.stackTotal}'
              headerFormat: '<b>{point.name}</b><br/>',
              pointFormat: '{series.name}: {point.percentage:.0f}%<br>Total Compliances: {point.stackTotal}'
            },
            plotOptions: {
                series: {
                    stacking: 'normal',
                    dataLabels: {
                        enabled: true,
                        color:  '#000000',
                        style: {
                            /*textShadow: '0 0 3px black',*/
                            textShadow:null,
                        },
                        // format:'{point.percentage:.0f}%'
                        format:'{point.y}'
                    },
                    point: {
                                events: {
                                    click: function() {
                                        var drilldown = this.drilldown;
                                        if (drilldown) {
                                        loadDrillDownData(drilldown); 
                                        }
                                    }
                                  }
                                }
                },
            },
            series: [{
                    name: 'Complied',
                    data : completed_data
                }, {
                    name: 'Delayed compliance',
                        data : pending_data
                }, {
                    name: 'In progress',
                         data : inprogress_data
                }, {
                    name: 'Not complied',
                        data : not_complied
                }]
        });
      });
    }


    function loadDivision(){
      $("#previous").show();
      $("#next").show();
      $("#container").show();
      $("#imgcontainer").hide();
      $(function () { 
      	  var inprogress_data = [10];
    	  var pending_data = [10];
    	  var completed_data = [10];
    	  var not_complied = [10];
    	  var values = $("#division").val();
    	  if(values.length > 1){
	    	  for(var i=0;i<values.length;i++){
	    	  	if (values[i] ==  "KG Manufacturing"){
	    	  		inprogress_data[i] = {name: 'KG Manufacturing',y: 24,drilldown:"Inprogress"};
	    	  		pending_data[i] = {name: 'KG Manufacturing',y: 22,drilldown:"Delayed"};
	    	  		completed_data[i] = {id:'fin',name: 'KG Manufacturing',y: 25,drilldown:"Complied"};
	    	  		not_complied[i] = {name: 'KG Manufacturing',y: 23,drilldown:"NotComplied"};
	    	  	}else if(values[i] ==  "KG Quality Checking"){
	    	  		inprogress_data[i] = {name: 'KG Quality Checking',y: 18,};
	    	  		pending_data[i] = {name: 'KG Quality Checking',y: 15,};
	    	  		completed_data[i] = {id:'fin',name: 'KG Quality Checking',y: 23};
	    	  		not_complied[i] = {name:"KG Quality Checking", y:24}
	    	  	}else if(values[i] ==  "KG Sales"){
	    	  		inprogress_data[i] = {name: 'KG Sales',y: 25};
	    	  		pending_data[i] = {name: 'KG Sales',y: 13};
	    	  		completed_data[i] = {id:'fin',name: 'KG Sales',y: 26};
	    	  		not_complied[i] = {name:"KG Sales", y:14}
	    	  	}else if(values[i] ==  "KG Testing"){
	    	  		inprogress_data[i] = {name: 'KG Testing',y: 15};
	    	  		pending_data[i] = {name: 'KG Testing',y: 12};
	    	  		completed_data[i] = {id:'fin',name: 'KG Testing',y: 23};
	    	  		not_complied[i] = {name:"KG Testing", y:24}
	    	  	}else if(values[i] ==  "KG Administration"){
	    	  		inprogress_data[i] = {name: 'KG Administration',y: 22};
	    	  		pending_data[i] = {name: 'KG Administration',y: 36};
	    	  		completed_data[i] = {id:'fin',name: 'KG Administration',y: 13};
	    	  		not_complied[i] = {name:"KG Administration", y:14}
	    	  	}else if(values[i] ==  "KG Security"){
              inprogress_data[i] = {name: 'KG Security',y: 22};
              pending_data[i] = {name: 'KG Security',y: 26};
              completed_data[i] = {id:'fin',name: 'KG Security',y: 23};
              not_complied[i] = {name:"KG Security", y:14}
            }else if(values[i] ==  "KG Research"){
              inprogress_data[i] = {name: 'KG Research',y: 32};
              pending_data[i] = {name: 'KG Research',y: 16};
              completed_data[i] = {id:'fin',name: 'KG Research',y: 13};
              not_complied[i] = {name:"KG Research", y:14}
            }else{
              continue;
            }

	    	  }
	      }else if(values.length <=0){
	      	alert("Select atleast one division to load chart");
	      }else{
	      	loadCompanySingleSelection(values[0]);
	      }

        $('#container').highcharts({
        // colors:['#239e13','#a3d202','#faf216','#e70808'],
        //colors:['#125900','#FF7700','#FFDA0F','#D10018'],
		    colors:['#F32D2B','#F0F468','#F58835','#A5D17A'],
        chart: {
            type: 'bar',
            width:'850'
        },
        title: {
            text: 'Division wise compliances'
        },
        xAxis: {
            categories: ['KG Manufacturing', 'KG Sales', 'KG Quality Checking', 'KG Administration', 'KG Testing', 'KG Security', 'KG Research'],
            title: {
                text: 'Divisions'
            },
            labels: {
                          useHTML: true,
                          formatter: function() {
                              var name=this.value;
                              if(name == "KG Manufacturing"){
                                      $("#hidden").val("KG Manufacturing");
                                var link = '<a href="#"  id="'+name+'" onclick=loadCompanySingleSelectionPie(this.id)>'+
                                    name +'</a>'
                                return link;
                              }else{
                                var link = '<span  id="'+name+'" >'+
                                    name +'</span>'
                                return link;
                              }
                         }
                      },
        },
        yAxis: {
            min: 0,
            title: {
                text: 'Total Compliances'
            }
        },
        legend: {
            reversed: true
        },
        tooltip: {
              // headerFormat: '<b>{point.x}</b><br/>',
              // pointFormat: '{series.name}: {point.y} out of Total: {point.stackTotal}'
              headerFormat: '<b>{point.x}</b><br/>',
              pointFormat: '{series.name}: {point.percentage:.0f}%<br>Total Compliances: {point.stackTotal}'
            },
        plotOptions: {
            series: {
                stacking: 'normal',
                dataLabels: {
                        enabled: true,
                        color:  '#000000',
                        style: {
                            /*textShadow: '0 0 3px black',*/
                            textShadow:null,
                        },
                        // format:'{point.percentage:.0f}%'
                        format:'{point.y}'
                    },
                point: {
                            events: {
                                click: function() {
                                    var drilldown = this.drilldown;
                                    if (drilldown) {
                                      loadDrillDownData(drilldown); 
                                    }
                                }
                              }
                            }
            },
        },
        series: [ {
                name: 'Not complied',
                    data :not_complied
            },
            {
                name: 'In progress',
                     data :inprogress_data
            }, {
                name: 'Delayed compliance',
                    data :pending_data
            }, 
            {
                name: 'Complied1',
                data : completed_data
            }]
    });
      });
    }

    function loadUnit(){
     $("#previous").show();
     $("#next").show();
     $("#container").show();
      $("#imgcontainer").hide();
     $(function () { 
     	  var inprogress_data = [10];
    	  var pending_data = [10];
    	  var completed_data = [10];
    	  var not_complied = [10];
    	  var values = $("#unit").val();
        if(values.length > 1){
	    	  for(var i=0;i<values.length;i++){

	    	  	if (values[i] ==  "Branch Office - 1"){
	    	  		inprogress_data[i] = {name: 'Branch Office - 1',y: 23,drilldown:"Inprogress"};
	    	  		pending_data[i] = {name: 'Branch Office - 1',y: 22,drilldown:"Delayed"};
	    	  		completed_data[i] = {id:'fin',name: 'Branch Office - 1',y: 19,drilldown:"Complied"};
	    	  		not_complied[i] = {name: 'Branch Office - 1',y: 31,drilldown:"NotComplied"};
	    	  	}else if(values[i] ==  "Branch Office - 2"){
	    	  		inprogress_data[i] = {name: 'Branch Office - 2',y: 19,};
	    	  		pending_data[i] = {name: 'Branch Office - 2',y: 27,};
	    	  		completed_data[i] = {id:'fin',name: 'Branch Office - 2',y: 28};
	    	  		not_complied[i] = {name:"Branch Office - 2", y:15}
	    	  	}else if(values[i] ==  "Branch Office - 3"){
	    	  		inprogress_data[i] = {name: 'Branch Office - 3',y: 15};
	    	  		pending_data[i] = {name: 'Branch Office - 3',y: 23};
	    	  		completed_data[i] = {id:'fin',name: 'Branch Office - 3',y: 16};
	    	  		not_complied[i] = {name:"Branch Office - 3", y:23}
	    	  	}else if(values[i] ==  "Branch Office - 4"){
	    	  		inprogress_data[i] = {name: 'Branch Office - 4',y: 25};
	    	  		pending_data[i] = {name: 'Branch Office - 4',y: 32};
	    	  		completed_data[i] = {id:'fin',name: 'Branch Office - 4',y: 13};
	    	  		not_complied[i] = {name:"Branch Office - 4", y:24}
	    	  	}else if(values[i] ==  "Branch Office - 5"){
	    	  		inprogress_data[i] = {name: 'Branch Office - 5',y: 12};
	    	  		pending_data[i] = {name: 'Branch Office - 5',y: 26};
	    	  		completed_data[i] = {id:'fin',name: 'Branch Office - 5',y: 33};
	    	  		not_complied[i] = {name:"Branch Office - 5", y:14}
	    	  	}else if(values[i] ==  "Branch Office - 6"){
              inprogress_data[i] = {name: 'Branch Office - 6',y: 12};
              pending_data[i] = {name: 'Branch Office - 6',y: 26};
              completed_data[i] = {id:'fin',name: 'Branch Office - 6',y: 13};
              not_complied[i] = {name:"Branch Office - 6", y:24}
            }else if(values[i] ==  "Branch Office - 7"){
              inprogress_data[i] = {name: 'Branch Office - 7',y: 32};
              pending_data[i] = {name: 'Branch Office - 7',y: 16};
              completed_data[i] = {id:'fin',name: 'Branch Office - 7',y: 23};
              not_complied[i] = {name:"Branch Office - 7", y:24}
            }
	    	  }
	      }else if(values.length <=0){
	      	alert("Select atleast one unit to load chart");
	      }else{
	      	loadCompanySingleSelection(values[0]);
	      }  
          $('#container').highcharts({
        // colors:['#239e13','#a3d202','#faf216','#e70808'],
        //colors:['#125900','#FF7700','#FFDA0F','#D10018'],
		    colors:['#F32D2B','#F0F468','#F58835','#A5D17A',],
        chart: {
            type: 'bar',
            width:'850',
        },
        title: {
            text: 'Unit wise compliances'
        },
        xAxis: {
            categories: ['Branch Office - 1', 'Branch Office - 2', 'Branch Office - 3', 'Branch Office - 4', 'Branch Office - 5','Branch Office - 6','Branch Office - 7'],
            title: {
                text: 'Units'
            },
            labels: {
                          useHTML: true,
                          formatter: function() {
                              var name=this.value;
                              if(name == "Branch Office - 1"){
                                      $("#hidden").val("Branch Office - 1");
                                var link = '<a href="#"  id="'+name+'" onclick=loadCompanySingleSelectionPie(this.id)>'+
                                    name +'</a>'
                                return link;
                              }else{
                                var link = '<span  id="'+name+'" >'+
                                    name +'</span>'
                                return link;
                              }
                         }
                      },
        },
        yAxis: {
            min: 0,
            title: {
                text: 'Total Compliances'

            }
        },
        legend: {
            reversed: true
        },
        tooltip: {
              // headerFormat: '<b>{point.x}</b><br/>',
              // pointFormat: '{series.name}: {point.y} out of total: {point.stackTotal}'
              headerFormat: '<b>{point.x}</b><br/>',
              pointFormat: '{series.name}: {point.percentage:.0f}%<br>Total Compliances: {point.stackTotal}'
            },
        plotOptions: {
            series: {
                stacking: 'normal',
                dataLabels: {
                        enabled: true,
                        color:  '#000000',
                        style: {
                            /*textShadow: '0 0 3px black',*/
                            textShadow:null,
                        },
                        // format:'{point.percentage:.0f}%'
                        format:'{point.y}'
                    },
                point: {
                            events: {
                                click: function() {
                                    var drilldown = this.drilldown;
                                    if (drilldown) {
                                      loadDrillDownData(drilldown); 
                                    }
                                }
                              }
                            }
            },
        },
        series: [{
                name: 'Not complied',
                    data : not_complied
            },  {
                name: 'In progress',
                     data : inprogress_data
            },{
                name: 'Delayed compliance',
                    data : pending_data
            },{
                name: 'Complied',
                data : completed_data
            } ]
    });
      });
    }

    function loadBusinessGroup(){
      $("#viewaspie").hide();
    $("#back").hide();
    $("#viewasbar").hide();
    $(".SumoSelect").show();
    $("#entity-auto").hide();
    $("#division-auto").hide();
    $("#unit-auto").hide();
    $("#previous").hide();
    $("#next").hide();
    $("#container").show();
      $("#imgcontainer").hide();
    $(function () {
        $('#container').highcharts({
          // colors:['#125900','#FF7700','#FFDA0F','#D10018'],
          // colors order: Complied-Green, Delayed-Compliance-Orange, Inprogress-Yellow, Non-compliance-Red
          // 2E9559
          colors:['#F32D2B','#F0F468','#F58835','#A5D17A',],
          // colors:['#2E9559','rgba(255, 191, 0, 1)','rgba(255, 255, 0, 0.9)','rgba(255, 0, 0, 0.8)'],
          chart: {
              type: 'bar',
              width:'850',
              
          },
          title: {
              text: 'Business Group wise compliances'
          },
          xAxis: {
             title: {
                    text: 'Business Groups'
                },
              categories: ['KG Business group 1', 'KG Business group 2', 'KG Business group 3', 'KG Business group 4', 'KG Business group 5'],
              labels: {
                            useHTML: true,
                            formatter: function() {
                                var name=this.value;
                                if(name == "India"){
                                  var link = '<a href="#"  id="'+name+'" onclick=loadCountrySpecific(this.id)>'+
                                      name +'</a>'
                                  return link;
                                }else{
                                  var link = '<span  id="'+name+'" >'+
                                      name +'</span>'
                                  return link;
                                }
                           }
                        },
          },
          yAxis: {
              min: 0,
              title: {
                  text: 'Total Compliances'
              },
          },
          legend: {
              reversed: true,
          },
          tooltip: {
              // headerFormat: '<b>{point.x}</b><br/>',
              // pointFormat: '{series.name}: {point.y} out of {point.stackTotal}'
              headerFormat: '<b>{point.x}</b><br/>',
            pointFormat: '{series.name}: {point.percentage:.0f}%<br>Total Compliances: {point.stackTotal}'
          },
          plotOptions: {
              series: {
                  stacking: 'normal',
                  dataLabels: {
                          enabled: true,
                          color:  '#000000',
                          style: {
                              textShadow:null,
                              color:'#000000'
                          },
                          // format:'{point.percentage:.0f}%'
                          format:'{point.y}'
                      },
                  point: {
                              events: {
                                  click: function() {
                                      var drilldown = this.drilldown;
                                      if (drilldown) {
                                        loadDrillDownData(drilldown); 
                                      }
                                  }
                                }
                              }
              },
          },
          series: [ {
                  name: 'Not complied',
                      data : [
                          {
                              y:22,
                              drilldown:"busNotComplied",
                          },{
                              y:15,
                          },{
                              y:30,
                          }, {
                              y:10,
                          },{
                              y:20,
                          },                   
                      ]
              },{
                  name: 'In progress',
                       data : [
                          {
                              y:18,
                              drilldown:"busInprogress",
                          },{
                              y:25,
                          },{
                              y:10,
                          }, {
                              y:25,
                          },{
                              y:30,
                          },                   
                      ]
              },{
                  name: 'Delayed Compliance',
                      data : [
                          {
                              y:15,
                              drilldown:"busDelayed",
                          },{
                              y:20,
                          },{
                              y:20,
                          }, {
                              y:15,
                          },{
                              y:10,
                          },                   
                      ]
              },{
                  name: 'Complied',
                  data : [
                          {
                              y:15,
                              drilldown:"busComplied",
                          },{
                              y:30,
                          },{
                              y:20,
                          }, {
                              y:20,
                          },{
                              y:30,
                          },                   
                      ]
              },  ]
      });
  });
    }

     function loadUnitNext(){
      $("#previous").show();
      $("#next").show();
      $("#container").show();
      $("#imgcontainer").hide();
      $(function () {  
        var inprogress_data = [10];
        var pending_data = [10];
        var completed_data = [10];
        var not_complied = [10];
              inprogress_data[0] = {name: 'KG Namakal Unit',y: 20,drilldown:"Inprogress"};
              pending_data[0] = {name: 'KG Namakal Unit',y: 16,drilldown:"Delayed"};
              completed_data[0] = {id:'fin',name: 'KG Namakal Unit',y: 25,drilldown:"Complied"};
              not_complied[0] = {name: 'KG Namakal Unit',y: 23,drilldown:"NotComplied"};

              inprogress_data[1] = {name: 'Suseendram, Kanyakumari',y: 18,};
              pending_data[1] = {name: 'Suseendram, Kanyakumari',y: 22,};
              completed_data[1] = {id:'fin',name: 'Suseendram, Kanyakumari',y: 25};
              not_complied[1] = {name:"Suseendram, Kanyakumari", y:21}

              inprogress_data[2] = {name: 'Nagercoil, Kanyakumari',y: 15};
              pending_data[2] = {name: 'Nagercoil, Kanyakumari',y: 23};
              completed_data[2] = {id:'fin',name: 'Nagercoil, Kanyakumari',y: 26};
              not_complied[2] = {name:"Nagercoil, Kanyakumari", y:18}
            
              inprogress_data[3] = {name: 'Naloor, Tuticorin',y: 15};
              pending_data[3] = {name: 'Naloor, Tuticorin',y: 22};
              completed_data[3] = {id:'fin',name: 'Naloor, Tuticorin',y: 31};
              not_complied[3] = {name:"Naloor, Tuticorin", y:23};
         

      $('#container').highcharts({
            // colors:['#239e13','#a3d202','#faf216','#e70808'],
            // colors:['#125900','#FF7700','#FFDA0F','#D10018'],
            colors:['#F32D2B','#F0F468','#F58835','#A5D17A',],
            chart: {
                type: 'bar',
                width:'850',
                
            },
            title: {
                text: 'Unitwise compliances'
            },
            xAxis: {
                categories: ['KG Namakal unit','Suseendram, Kanyakumari','Nagercoil, Kanyakumari','Naloor, Tuticorin'],
                title: {
                    text: 'Units'
                },
                labels: {
                              useHTML: true,
                              formatter: function() {
                                  var name=this.value;
                                  if(name == "KG Autoparts"){
                                    $("#hidden").val("KG Autoparts");
                                    var link = '<a href="#"  id="'+name+'" onclick=loadCompanySingleSelectionPie(this.id)>'+
                                        name +'</a>'
                                    return link;
                                  }else{
                                    var link = '<span  id="'+name+'" >'+
                                        name +'</span>'
                                    return link;
                                  }
                             }
                          },
            },
            yAxis: {
                min: 0,
                title: {
                    text: 'Total Compliances'
                }
            },
            legend: {
                reversed: true
            },
            tooltip: {
              // headerFormat: '<b>{point.x}</b><br/>',
              // pointFormat: '{series.name}: {point.y} out of Total: {point.stackTotal}'
              headerFormat: '<b>{point.x}</b><br/>',
              pointFormat: '{series.name}: {point.percentage:.0f}%<br>Total Compliances: {point.stackTotal}'
            },
            plotOptions: {
                series: {
                    stacking: 'normal',
                    dataLabels: {
                        enabled: true,
                        color:"#000000",
                        style: {
                           textShadow:null,
                        },
                        // format:'{point.percentage:.0f}%'
                        format:'{point.y}'
                    },
                    point: {
                                events: {
                                    click: function() {
                                        var drilldown = this.drilldown;
                                        if (drilldown) {
                                        loadDrillDownData(drilldown); 
                                        }
                                    }
                                  }
                                }
                },
            },
            series: [{
                    name: 'Complied',
                    data : completed_data
                }, {
                    name: 'Delayed compliance',
                        data : pending_data
                }, {
                    name: 'In progress',
                         data : inprogress_data
                }, {
                    name: 'Not complied',
                        data : not_complied
                }]
        });
      });
     }

    function loadDrillDownData(name){
    	$("#viewaspie").hide();
    	$("#viewasbar").hide();
      $("#next").hide();
      $("#previous").hide();
      $("#nextyear").hide();
      $("#previousyear").hide();
    	$("#back").show();
      $("#container").hide();
      $("#imgcontainer").show();
    	var img_name="";
    	var margin_style="";
      if(name == "EntityInprogress"){
        img_name = "/images/dash-list/task-entity-inprogress.png";
        name = "KG Booking";
        com_name="In progress ";
    	}else if(name == "EntityComplied"){
          img_name = "/images/dash-list/task-entity-complied.png";
          name = "KG Booking";
        com_name="Complied ";
          margin_style = "margin-left:3px";
      }else if(name == "Inprogress"){
          img_name = "/images/dash-list/task-group-inprogress.png";
          name = "India";
        com_name="In progress ";
    	}else if(name == "Delayed"){
          img_name = "/images/dash-list/task-group-delayed.png";
          name = "India";
        com_name="Delayed ";
    	}else if(name == "NotComplied"){
        img_name = "/images/dash-list/task-group-notcomplied.png";
    		name = "India";
        com_name="Not complied ";
    	}else if(name == "Complied"){
        img_name = "/images/dash-list/task-group-complied.png";
    		name = "India";
        com_name="Complied ";
    	}else if(name == "busInprogress"){
          img_name = "/images/dash-list/task-business-inprogress.png";
          name = "Business Group 1";
        com_name="In progress ";
      }else if(name == "busDelayed"){
          img_name = "/images/dash-list/task-business-delayed.png";
          name = "Business Group 1";
        com_name="Delayed compliance";
      }else if(name == "busNotComplied"){
        img_name = "/images/dash-list/task-business-notcomplied.png";
        name = "Business Group 1 ";
        com_name="Not complied ";
      }else if(name == "busComplied"){
        img_name = "/images/dash-list/task-business-complied.png";
        name = "Business Group 1";
        com_name="Complied ";
      }else if(name == "unitesc"){
    		img_name = "/images/dash-list/escalations-unit-delayed.png";
    		name = "South gate, Madurai - escalations";
    		margin_style="margin-left:200px";
    	}else if(name == "divisionesc"){
    		img_name = "/images/dash-list/escalations-division-delayed.png";
    		name = "KG Manufacturing - escalations";
    		margin_style="margin-left:100px";
    	}else if(name == "entityesc"){
    		img_name = "/images/dash-list/escalations-entity-delayed.png";
    		name = "KG - escalations";
    		margin_style="margin-left:55px";
    	}else if(name == "groupesc"){
    		img_name = "/images/dash-list/escalations-group-delayed.png";
    		name = "KG Groups - escalations";
    	}else if(name == "unitcomp"){
    		img_name = "/images/dash-list/complienceopportunity-unit-not.png";
    		name = "South gate, Madurai - Applicable compliance tasls";
    		margin_style="margin-left:200px";
    	}else if(name == "divisioncomp"){
    		img_name = "/images/dash-list/complienceopportunity-division-not.png";
    		name = "Manufacturing division - Applicable compliances";
    		margin_style="margin-left:150px";
    	}else if(name == "entitycomp"){
    		img_name = "/images/dash-list/complienceopportunity-entity-not.png";
    		name = "KG Entity- Applicable compliances";
    		margin_style="margin-left:40px";
    	}else if(name == "groupcomp"){
    		img_name = "/images/dash-list/complienceopportunity-group-not.png";
    		name = "KG Groups - Applicable compliances";
    	}else if(name == "Jan"){
        if($("#radio1").is(':checked')){
             img_name = "/images/dash-list/drill-group-completed.png";
        }else if($("#radio2").is(':checked')){
              img_name = "/images/dash-list/drill-entity-completed.png";
               margin_style="margin-left:30px";
            }else if($("#radio3").is(':checked')){
              img_name = "/images/dash-list/drill-division-completed.png";
               margin_style="margin-left:120px";
            }else if($("#radio4").is(':checked')){
              img_name = "/images/dash-list/drill-unit-completed.png";
               margin_style="margin-left:140px";
            }
        // img_name = "/images/Company-completed-drill.png";
        name = "";
      }
    	var htmlstr = '<div style="'+margin_style+'" align="left"><table width="100%" style="margin-left:10px;"><tr><td style="margin-left:10px;font-size:1em" width="100%">Compliances - Country: '+name+', Status: '+com_name+'</td></tr></table><br><img src='+img_name+'></div>';
       $(function () {
        $('#imgcontainer').html(htmlstr);
      });
    }

    function loadCountrySpecificBar(value){
    	$("#viewaspie").show();
    	$("#viewasbar").hide();
    	$("#back").show();
      $("#container").show();
      $("#imgcontainer").hide();
    	$(function () {
		    $('#container').highcharts({
		        // colors:['#239e13','#a3d202','#faf216','#e70808'],
                        colors:['#A5D17A','#F58835','#F0F468','#F32D2B',],
		        chart: {
		            type: 'column'
		        },
		        title: {
		            text: 'Group wise Compliances - India'
		        },
		        xAxis: {
		            type: 'category',
                  title: {
                    text: 'Compliance Status'
                },
		        },
		        yAxis: {
		            title: {
		                text: 'Total Compliances'
		            }

		        },
		        legend: {
		            enabled: false
		        },
		        plotOptions: {
		        	column:{
                dataLabels: {
                        enabled: true,
                        style: {
                            /*textShadow: '0 0 3px black',*/
                            textShadow:null,
                        },
                        /*format:'{point.percentage:.0f}%'*/
                        format:'{point.y}'
					// 	formatter:function() {
					// 	var dataSum = (5 + 2 +8 + 3);
					// 	var pcnt = (this.y / dataSum) * 100;
					// 	return Highcharts.numberFormat(pcnt,0) + '%';
					// }
                    },
		        		point: {
                        events: {
                            click: function() {
                                var drilldown = this.drilldown;
                                if (drilldown) {
                                  $("#hidden").val("singlebar");
                                 loadDrillDownData(drilldown); 
                                }
                            }
                          }
                        }
		        	},
		            series: {
		                borderWidth: 0,
		                dataLabels: {
		                    enabled: true,
		                    /*format: '{point.y:.0f}'*/
		                }
		            }
		        },

		        tooltip: {
                            headerFormat: '',
                            pointFormat: '<span>{point.name}</span>: <b>{point.y:.0f} Out of 70'

		        },

		        series: [{
		            name: "Compliances - Group wise",
		            colorByPoint: true,
		            data: [{
		                name: "Complied",
		                y: 15,
		                drilldown: "Complied"
		            }, {
		                name: "Delayed compliance",
		                y: 15,
		                drilldown: "Delayed"
		            }, {
		                name: "In progress",
		                y: 18,
		                drilldown: "Inprogress"
		            }, {
		                name: "Not complied",
		                y: 22,
		                drilldown: "NotComplied"
		            }]
		        }],
		    });
		});

    }

    function loadCountrySpecific(value){
    	$("#viewaspie").hide();
    	$("#back").show();
    	$("#viewasbar").show();
      $("#container").show();
      $("#imgcontainer").hide();
        $(function () {
            $('#container').highcharts({
        colors:['#A5D17A','#F58835', '#F0F468', '#F32D2B'],
        chart: {
            type: 'pie',
            options3d: {
                enabled: true,
                alpha: 45,
                beta: 0
            }
        },
        title: {
            text: "Group wise Compliances - India"
        },
        tooltip: {
              headerFormat : '',
            pointFormat: '{point.name}:{point.y} Out of 70'

        },
        plotOptions: {
            pie: {
                allowPointSelect: true,
                cursor: 'pointer',
                depth: 35,
                dataLabels: {
                    enabled: true,
                    format: '{point.percentage:.0f}%'
                },
                showInLegend: true,
                point: {
                        events: {
                            click: function() {
                                var drilldown = this.drilldown;
                                $("#hidden").val("singlepie");
                                if (drilldown) { 
                                  loadDrillDownData(drilldown);
                                }
                            }
                          }
                        }
            }
        },
        series: [{
            type: 'pie',
                    name: 'Compliance',
                    data: [
                      {
                        name:"Complied",
                        y:15,
                        drilldown:"Complied"
                      },{
                        name:"Delayed compliance",
                        y:15,
                        drilldown:"Delayed"
                      },{
                        name:"In progress",
                        y:18,
                        drilldown:"Inprogress"
                      },{
                        name:"Not complied",
                        y:22,
                        drilldown:"NotComplied"
                      },
                    ]
        }]
    });
        });
    }


	function loadGroup(){
		$("#viewaspie").hide();
                $("#back").hide();
                $("#viewasbar").hide();
                $(".SumoSelect").show();
                $("#entity-auto").hide();
                $("#division-auto").hide();
                $("#unit-auto").hide();
                $("#previous").hide();
                $("#next").hide();
                $("#container").show();
      $("#imgcontainer").hide();
		$(function () {
          $('#container').highcharts({
            // colors:['#125900','#FF7700','#FFDA0F','#D10018'],
            // colors order: Complied-Green, Delayed-Compliance-Orange, Inprogress-Yellow, Non-compliance-Red
            // 2E9559
            colors:['#F32D2B','#F0F468','#F58835','#A5D17A',],
            // colors:['#2E9559','rgba(255, 191, 0, 1)','rgba(255, 255, 0, 0.9)','rgba(255, 0, 0, 0.8)'],
            chart: {
                type: 'bar',
                width:'850',
               
            },
            title: {
                text: 'Group wise Compliances'
            },
            xAxis: {
               title: {
                text: 'Countries'
            },
                categories: ['India', 'US', 'Singapore', 'Malaysia', 'China'],
                labels: {
                              useHTML: true,
                              formatter: function() {
                                  var name=this.value;
                                  if(name == "India"){
                                    var link = '<abbr class="page-load" style="width:200px" title="Finance : April to March\nIndustrial Law : January to Dececmber\nLabour Law : January to December"><a href="#"  id="'+name+'" onclick=loadCountrySpecific(this.id)>'+
                                        name +'</a><abbr>'
                                    return link;
                                  }else{
                                    var link = '<span  id="'+name+'" >'+
                                        name +'</span>'
                                    return link;
                                  }
                             }
                          },
            },
            yAxis: {
                min: 0,
                title: {
                    text: 'Total Compliances'
                },
            },
            legend: {
                reversed: true,
            },
            tooltip: {
                // headerFormat: '<b>{point.x}</b><br/>',
                // pointFormat: '{series.name}: {point.percentage:.0f}%<br>Total Compliances: {point.stackTotal}'
                headerFormat: '<b>{point.x}</b>: {point.percentage:.0f}% ',
                pointFormat: '({point.y} Out of {point.stackTotal})'
            },
            plotOptions: {
                series: {
                    stacking: 'normal',
                    dataLabels: {
                            enabled: true,
                            color:  '#000000',
                            style: {
                                textShadow:null,
                                color:'#000000'
                            },
                            // format:'{point.percentage:.0f}%'
                            format:'{point.y}'
                        },
                    point: {
                                events: {
                                    click: function() {
                                        var drilldown = this.drilldown;
                                        $("#hidden").val("group");
                                        if (drilldown) {
                                          loadDrillDownData(drilldown); 
                                        }
                                    }
                                  }
                                }
                },
            },
            series: [ {
                    name: 'Not complied',
                        data : [
                            {
                                y:22,
                                drilldown:"NotComplied",
                            },{
                                y:15,
                            },{
                                y:30,
                            }, {
                                y:10,
                            },{
                                y:20,
                            },                   
                        ]
                },{
                    name: 'In progress',
                         data : [
                            {
                                y:18,
                                drilldown:"Inprogress",
                            },{
                                y:25,
                            },{
                                y:10,
                            }, {
                                y:25,
                            },{
                                y:30,
                            },                   
                        ]
                },{
                    name: 'Delayed Compliance',
                        data : [
                            {
                                y:15,
                                drilldown:"Delayed",
                            },{
                                y:20,
                            },{
                                y:20,
                            }, {
                                y:15,
                            },{
                                y:10,
                            },                   
                        ]
                },{
                    name: 'Complied',
                    data : [
                            {
                                y:15,
                                drilldown:"Complied",
                            },{
                                y:30,
                            },{
                                y:20,
                            }, {
                                y:20,
                            },{
                                y:30,
                            },                   
                        ]
                },  ]
        });
    });
	}


  </script> 
<style type="text/css">
.filtertable 
{
  width: 85%;
  margin-left: 5%;
}
.filtertable td{
  vertical-align: top; 
}
</style>
<div class="content-container" >
  <div class="content-area">
    <div class="archive-container" style="width:100%;margin-bottom: 40px;">
      <div class="archive-header"> 
        <span class="task-status-tab active" id="task" style="padding-left:8px;padding-right:8px"><a href="/home" style="text-decoration:none;color:white">Compliance Status</a></span>
        <span class="esc-tab" id="esc" style="padding-left:8px;padding-right:8px"><a href="/home_escalations" style="text-decoration:none;color:white">Escalations</a></span> 
        <span class="ageing-tab" id="age"><a href="/home_ageingwise" style="text-decoration:none;color:white">Not Complied</a></span> 
        <span class="usecom-tab" id="usecom"><a href="/home_userwise" style="text-decoration:none;color:white">User wise Compliances</a></span> 
        <span class="trend-tab" id="trend"><a href="/home_trend" style="text-decoration:none;color:white">Trend Chart</a></span> 
        <span class="compliance-tab" id="comp"><a href="/home_risk" style="text-decoration:none;color:white">Compliance Risk</a></span> 
        </div>
        <div class="clearfix"></div>
      <div id="level-filter" style="width:100%">
        <input type="hidden" id="hidden"/>
        <div align="center" style="border:1px solid #fff;">
        <div style="padding-top:10px;"> <span>Filter By:</span> </div>
        <table class="filtertable">
        <tr>
        <td colspan="5" align="center">
        <table width="100%" ><tr>
        <td width="50%" >
        <div class="align_right" style="float:right;postion:relative; margin-right:140px; width:300px;">
          <input type="radio" name="" id="domainradio" class="radio"   />
          <label for="domainradio" id="radiolabel"  style="width:90px">Domain</label>
          
          <div class="textboxdomain" style="display:none;">
            <p id="domain-para" style="margin-top:3px; float:right;  width:200px;">
              <select  multiple="multiple" placeholder="Select Domain" onchange="console.log($(this).children(':selected').length)" class="testSelAll2 input-box sumo2" style="width:95%;">
                <option value="selectall" >Select All</option> 
                <!--<option value="deselectall" >Deselect All</option>-->
                <option value="Finance" selected>Finance</option>
                <option value="Labour Law" selected>Labour Law</option>
                <option value="Industrial Law" selected>Industrial Law</option>
              </select>
               <span style="padding-left:10px;"><input id="go-dom" type="button" class="btn" value="Go" style="float:right; position:relative; margin-top:-26px; margin-left:0px;" /></span>
            </p>
          </div>
          </div>
        </td><td  width="50%">
          <input type="radio" name="dateradio" id="radio6" class="radio" checked />
          <label for="radio6" id="radiolabel" >Date</label>
          <div class="textboxdate" style="display:none;">          
            <p id="date-para1" style="margin-top:2px;margin-left:10px; ">
            <table width="75%" style=""><tr><td width="40%">&nbsp;
              <input type="text" class="input-box" placeholder="From date"/></td>
              <td width="40%">
              <input type="text" class="input-box" placeholder="To date"/>
              </td>
              <td width="20%">
              <span><a href="#">
              <input id="go-date" type="button" class="btn" value="Go" style="float:left;margin-top:0px;margin-left:-12px;  "/>
            </a></span> </td>
            </tr></table>
            </p>
          </div>
        
        </td>
        </tr></table>
        </td></tr>
        <tr><td>
        <div style="float:left;position:relative;width:100px">
          <input type="radio" name="radio" id="radio1" class="radio" checked/>
          <label for="radio1" id="radiolabel"  style="width:90px">Group</label>
          <div class="textboxgroup">
            <p>
              <input type="text" name="text1" id="text1" autofocus class="input-box icon-autocomplete margin10">
            </p>
          </div>
        </div>
        </td><td>
        <div style="position:relative;width:155px">
          <input type="radio" name="radio" id="radio5" class="radio"/>
          <label for="radio5" id="radiolabel"  style="width:120px">Business Group</label>
          <div class="textboxbusiness">
            <p id="business-para1" style="margin-top:5px;float:left;width:120px">
              <select id="business" multiple="multiple" placeholder="Select Business" onchange="console.log($(this).children(':selected').length)" class="testSelAll2 input-box sumo1" style="width:120px">
                <option value="selectall" selected>Select All</option>
                <option value="KGbg1" selected>KG Business Group 1</option>
                <option value="KGbg2" selected>KG Business Group 2</option>
                <option value="KGbg3" selected>KG Business Group 3</option>
                <option value="KGbg3" selected>KG Business Group 4</option>
                <option value="KGbg3" selected>KG Business Group 5</option>
              </select>
              <span><a href="#">
            <input id="go-bu" type="button" class="btn" value="Go" style="float:right;margin-top:0px;margin-right:-33px"/>
            </a></span> 
            </p>
           
            </div>
        </div>
        </td><td>
        <div style="position:relative;width:145px">
          <input type="radio" name="radio" id="radio2" class="radio"/>
          <label for="radio2" id="radiolabel"  style="width:110px">Legal Entity</label>
          <div class="textboxcompany">
            <input type="text" name="text2" id="entity-auto" value="KG" autofocus class="input-box icon-autocomplete" style="width:120px;margin-top:10px;">
            <p id="entity-para1" style="margin-top:5px;float:left;width:110px">
              <select id="legal-entity" multiple="multiple" placeholder="Select Entity" onchange="console.log($(this).children(':selected').length)" class="testSelAll2 input-box sumo1" style="width:110px">
                <option value="selectall" selected>Select All</option>
                <option value="KG Autoparts" selected>KG Autoparts</option>
                <option value="KG Transports" selected>KG Transports</option>
                <option value="KG Booking" selected>KG Booking</option>
                <option value="KG Electricals" selected>KG Electricals</option>
                <option value="KG Mobiles" selected>KG Mobiles</option>
                <option value="KG HealthCare" selected>KG HealthCare</option>
                <option value="KG HR Services" selected>KG HR Services</option>
                <option value="KG Hospitals" selected>KG Hospitals</option>
                <option value="KG Bakeries" selected>KG Bakeries</option>
                <option value="KG Hotels" selected>KG Hotels</option>
                <option value="KG Schools" selected>KG Schools</option>
                <option value="KG University" selected>KG University</option>
              </select>
              <span><a href="#">
            <input id="go-le" type="button" class="btn" value="Go" style="float:right;margin-top:-0px;margin-right:-33px"/>
            </a></span> 
            </p>
           
            </div>
        </div>
        </td><td>
        <div style="float:left;position:relative;width:120px">
          <input type="radio" name="radio" id="radio3" class="radio"/>
          <label for="radio3" id="radiolabel"  style="width:90px">Division</label>
          <div class="textboxdivision">
            <p id="division-para1" style="margin-top:5px;float:left;width:90px">
              <select id="division" multiple="multiple" placeholder="Select Domain" onchange="console.log($(this).children(':selected').length)" class="testSelAll2 input-box sumo1" style="width:90px;">
                <option value="selectall" >Select All</option>
                <!--<option value="deselectall" >Deselect All</option>-->
                <option value="KG Manufacturing" selected>KG Manufacturing</option>
                <option value="KG Sales" selected>KG Sales</option>
                <option value="KG Quality Checking" selected>KG Quality Checking</option>
                <option value="KG Administration" selected>KG Administration</option>
                <option value="KG Testing" selected>KG Testing</option>
                <option value="KG Security" selected>KG Security</option>
                <option value="KG Research" selected>KG Research</option>
                <option value="KG HR Unit" selected>KG HR Unit</option>
                <option value="KG Development" selected>KG Development</option>
              </select>
              <span><a href="#">
            <input id="go-d" type="button" class="btn" value="Go" style="float:right;margin-top:0px;margin-right:-31px"/>
            </a></span> 
            </p>
       
            </div>
        </div>
        </td><td>
        <div style="float: left; position: relative; width: 120px;">
          <input type="radio" name="radio" id="radio4" class="radio"/>
          <label for="radio4" id="radiolabel" style="width:80px">Unit</label>
          <div class="textboxbranch">
            <input type="text" name="text4" id="unit-auto" autofocus value="South gate, Madurai"  class="input-box icon-autocomplete" style="width:120px;margin-top:10px">
            <p id="unit-para1" style="margin-top:5px;float:left;width:150px">
              <select id="unit"  multiple="multiple" placeholder="Select Domain" onchange="console.log($(this).children(':selected').length)" class="unit" style="width:80px;" >
                <optgroup label="Factory">
                  <option value="Branch Office - 1" selected>Branch Office - 1</option>
                  <option value="Branch Office - 2" selected>Branch Office - 2</option>
                  <option value="Branch Office - 3" selected>Branch Office - 3</option>
                  <option value="Branch Office - 4" selected>Branch Office - 4</option>
                </optgroup>
                   <optgroup label="Office">
                <option value="Branch Office - 5" >Branch Office - 5</option>
                <option value="Branch Office - 6" >Branch Office - 6</option>
                <option value="Branch Office - 7" >Branch Office - 7</option>
                <option value="Branch Office - 8" >Branch Office - 8</option>
</optgroup>
              </select>
             <!-- <input type="text" id="unit"  class="testSelAll2 input-box unit-textbox" value="Branch Office - 1,Branch Office - 2,Branch Office - 3,Branch Office - 4" >-->

              <span><a href="#">
            <input id="go-u" type="button" class="btn" value="Go" style="float:right;margin-right:35px"/>
            </a></span>
            </p>
           
             </div>
        </div>
       </td></tr></table>
      </div>
      <div class="clearfix" ></div><br>
      <!-- <div id="level-filter2" style="width:50%; margin: 0px auto">
          <div style="margin-left:100px">
          From
          <span><input type="text" class="input-box" style="width:100px" placeholder="dd-mon-yyyy"/></span>
          <span>To</span>
          <span><input type="text" class="input-box"  style="width:100px" placeholder="dd-mon-yyyy"/></span>
          <span><a href="#">
            <input id="go-date" type="button" class="btn" value="Go" />
            </a></span>
        </div>
      </div>
 -->
      <div class="graph-box">
        <input type="button" id="viewaspie" style="float:right;margin-right:20px" value="View as pie chart"/>
        <input type="button" id="viewasbar" style="float:right;margin-right:20px" value="View as bar chart"/>
        <input type="button" id="back" onClick="loadGroup()" style="float:right;margin-right:20px" value="Back"/>
        <p id="year-para" style="margin-top:5px;float:right;width:130px">
          <span style="font-size:13px">Select Year:</span><select id="year" multiple="multiple" placeholder="Select Years" onchange="console.log($(this).children(':selected').length)" class="testSelAll2 input-box sumo2" style="width:110px;float:right;" >
            <option value="2009" >2009</option>
            <option value="2010" >2010</option>
            <option value="2011" >2011</option>
            <option value="2012" >2012</option>
            <option value="2013" selected>2013</option>
            <option value="2014" selected>2014</option>
            <option value="2015" selected>2015</option>
          </select>
        </p>
        <div class="clearfix"></div>
        <div id="container" style="height: 400px;" align="center"></div>
        <div id="imgcontainer" style="height: auto"></div>
        <input type="button" id="previousyear" style="float:left;margin-left:20px" value="<< Previous Year"/>
        <input type="button" id="nextyear" style="float:left;margin-left:20px;" value="Next Year>>"/>
        <input type="button" id="next" style="float:right;margin-right:20px;" value="Next >>"/>
        <input type="button" id="previous" style="float:right;margin-right:20px"  value="<< Previous"/>
      </div>
    </div>
  </div>
</div>
<script src="/js/multiselect/jquery.multiple.select.js"></script>
<script>
  //$('#unit').find('select').multipleSelect({
 //   filter: true,
 //   multiple: true
//});
  $('#unit-para1').find('select').multipleSelect({
            filter: true,
            multiple: true
        });
</script>
<script>
$(function(){
  $('#text2').autoComplete({
      minChars: 1,
      source: function(term, suggest){
          term = term.toLowerCase();
          var choices = ['Bajaj Allianz Group', 'PRG Group', 'TVS Group'];
          var suggestions = [];
          for (i=0;i<choices.length;i++)
              if (~choices[i].toLowerCase().indexOf(term)) suggestions.push(choices[i]);
          suggest(suggestions);
      }
  });
  $('#text3').autoComplete({
      minChars: 1,
      source: function(term, suggest){
          term = term.toLowerCase();
          var choices = ['Auto Parts - Manufacturing', 'Division 1', 'Division 2'];
          var suggestions = [];
          for (i=0;i<choices.length;i++)
              if (~choices[i].toLowerCase().indexOf(term)) suggestions.push(choices[i]);
          suggest(suggestions);
      }
  });
  $('#text4').autoComplete({
      minChars: 1,
      source: function(term, suggest){
          term = term.toLowerCase();
          var choices = ['South Gate, Madurai', 'Periyar, Madurai', 'Mattuthavani, Madurai'];
          var suggestions = [];
          for (i=0;i<choices.length;i++)
              if (~choices[i].toLowerCase().indexOf(term)) suggestions.push(choices[i]);
          suggest(suggestions);
      }
  });
   
});
</script> 
{% endblock %} 